<!DOCTYPE html>
<!-- saved from url=(0056)https://takeshiwada1980.github.io/DB-2025/lecture05.html -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <meta name="robots" content="noindex,nofollow,noarchive">
    <meta name="referrer" content="no-referrer">

    <script>
      MathJax = {
        chtml: {
          displayAlign: "left",
          displayIndent: "1em",
        },
      };
    </script>

     <script src="./ç¬¬05å› 4I-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å·¥å­¦_files/tex-chtml-full.js.ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰" type="text/javascript"></script><style type="text/css">.CtxtMenu_InfoClose {  top:.2em; right:.2em;}
.CtxtMenu_InfoContent {  overflow:auto; text-align:left; font-size:80%;  padding:.4em .6em; border:1px inset; margin:1em 0px;  max-height:20em; max-width:30em; background-color:#EEEEEE;  white-space:normal;}
.CtxtMenu_Info.CtxtMenu_MousePost {outline:none;}
.CtxtMenu_Info {  position:fixed; left:50%; width:auto; text-align:center;  border:3px outset; padding:1em 2em; background-color:#DDDDDD;  color:black;  cursor:default; font-family:message-box; font-size:120%;  font-style:normal; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 15px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius:15px;               /* Safari and Chrome */  -moz-border-radius:15px;                  /* Firefox */  -khtml-border-radius:15px;                /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color="gray", Positive="true"); /* IE */}
</style><style type="text/css">.CtxtMenu_MenuClose {  position:absolute;  cursor:pointer;  display:inline-block;  border:2px solid #AAA;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  font-family: "Courier New", Courier;  font-size:24px;  color:#F0F0F0}
.CtxtMenu_MenuClose span {  display:block; background-color:#AAA; border:1.5px solid;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  line-height:0;  padding:8px 0 6px     /* may need to be browser-specific */}
.CtxtMenu_MenuClose:hover {  color:white!important;  border:2px solid #CCC!important}
.CtxtMenu_MenuClose:hover span {  background-color:#CCC!important}
.CtxtMenu_MenuClose:hover:focus {  outline:none}
</style><style type="text/css">.CtxtMenu_Menu {  position:absolute;  background-color:white;  color:black;  width:auto; padding:5px 0px;  border:1px solid #CCCCCC; margin:0; cursor:default;  font: menu; text-align:left; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 5px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius: 5px;             /* Safari and Chrome */  -moz-border-radius: 5px;                /* Firefox */  -khtml-border-radius: 5px;              /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */}
.CtxtMenu_MenuItem {  padding: 1px 2em;  background:transparent;}
.CtxtMenu_MenuArrow {  position:absolute; right:.5em; padding-top:.25em; color:#666666;  font-family: null; font-size: .75em}
.CtxtMenu_MenuActive .CtxtMenu_MenuArrow {color:white}
.CtxtMenu_MenuArrow.CtxtMenu_RTL {left:.5em; right:auto}
.CtxtMenu_MenuCheck {  position:absolute; left:.7em;  font-family: null}
.CtxtMenu_MenuCheck.CtxtMenu_RTL { right:.7em; left:auto }
.CtxtMenu_MenuRadioCheck {  position:absolute; left: .7em;}
.CtxtMenu_MenuRadioCheck.CtxtMenu_RTL {  right: .7em; left:auto}
.CtxtMenu_MenuInputBox {  padding-left: 1em; right:.5em; color:#666666;  font-family: null;}
.CtxtMenu_MenuInputBox.CtxtMenu_RTL {  left: .1em;}
.CtxtMenu_MenuComboBox {  left:.1em; padding-bottom:.5em;}
.CtxtMenu_MenuSlider {  left: .1em;}
.CtxtMenu_SliderValue {  position:absolute; right:.1em; padding-top:.25em; color:#333333;  font-size: .75em}
.CtxtMenu_SliderBar {  outline: none; background: #d3d3d3}
.CtxtMenu_MenuLabel {  padding: 1px 2em 3px 1.33em;  font-style:italic}
.CtxtMenu_MenuRule {  border-top: 1px solid #DDDDDD;  margin: 4px 3px;}
.CtxtMenu_MenuDisabled {  color:GrayText}
.CtxtMenu_MenuActive {  background-color: #606872;  color: white;}
.CtxtMenu_MenuDisabled:focus {  background-color: #E8E8E8}
.CtxtMenu_MenuLabel:focus {  background-color: #E8E8E8}
.CtxtMenu_ContextMenu:focus {  outline:none}
.CtxtMenu_ContextMenu .CtxtMenu_MenuItem:focus {  outline:none}
.CtxtMenu_SelectionMenu {  position:relative; float:left;  border-bottom: none; -webkit-box-shadow:none; -webkit-border-radius:0px; }
.CtxtMenu_SelectionItem {  padding-right: 1em;}
.CtxtMenu_Selection {  right: 40%; width:50%; }
.CtxtMenu_SelectionBox {  padding: 0em; max-height:20em; max-width: none;  background-color:#FFFFFF;}
.CtxtMenu_SelectionDivider {  clear: both; border-top: 2px solid #000000;}
.CtxtMenu_Menu .CtxtMenu_MenuClose {  top:-10px; left:-10px}
</style> 

    <link rel="icon" href="https://takeshiwada1980.github.io/DB-2025/favicon.ico" sizes="any">
    <link rel="stylesheet" href="./ç¬¬05å› 4I-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å·¥å­¦_files/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="./ç¬¬05å› 4I-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å·¥å­¦_files/css">
    <link rel="stylesheet" href="./ç¬¬05å› 4I-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å·¥å­¦_files/style.css">

    <title>ç¬¬05å› 4I-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å·¥å­¦</title>
  <style id="MJX-CHTML-styles">
mjx-container[jax="CHTML"] {
  line-height: 0;
}

mjx-container [space="1"] {
  margin-left: .111em;
}

mjx-container [space="2"] {
  margin-left: .167em;
}

mjx-container [space="3"] {
  margin-left: .222em;
}

mjx-container [space="4"] {
  margin-left: .278em;
}

mjx-container [space="5"] {
  margin-left: .333em;
}

mjx-container [rspace="1"] {
  margin-right: .111em;
}

mjx-container [rspace="2"] {
  margin-right: .167em;
}

mjx-container [rspace="3"] {
  margin-right: .222em;
}

mjx-container [rspace="4"] {
  margin-right: .278em;
}

mjx-container [rspace="5"] {
  margin-right: .333em;
}

mjx-container [size="s"] {
  font-size: 70.7%;
}

mjx-container [size="ss"] {
  font-size: 50%;
}

mjx-container [size="Tn"] {
  font-size: 60%;
}

mjx-container [size="sm"] {
  font-size: 85%;
}

mjx-container [size="lg"] {
  font-size: 120%;
}

mjx-container [size="Lg"] {
  font-size: 144%;
}

mjx-container [size="LG"] {
  font-size: 173%;
}

mjx-container [size="hg"] {
  font-size: 207%;
}

mjx-container [size="HG"] {
  font-size: 249%;
}

mjx-container [width="full"] {
  width: 100%;
}

mjx-box {
  display: inline-block;
}

mjx-block {
  display: block;
}

mjx-itable {
  display: inline-table;
}

mjx-row {
  display: table-row;
}

mjx-row > * {
  display: table-cell;
}

mjx-mtext {
  display: inline-block;
}

mjx-mstyle {
  display: inline-block;
}

mjx-merror {
  display: inline-block;
  color: red;
  background-color: yellow;
}

mjx-mphantom {
  visibility: hidden;
}

_::-webkit-full-page-media, _:future, :root mjx-container {
  will-change: opacity;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-math {
  display: inline-block;
  text-align: left;
  line-height: 0;
  text-indent: 0;
  font-style: normal;
  font-weight: normal;
  font-size: 100%;
  font-size-adjust: none;
  letter-spacing: normal;
  border-collapse: collapse;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  direction: ltr;
  padding: 1px 0;
}

mjx-container[jax="CHTML"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="CHTML"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="CHTML"][display="true"] mjx-math {
  padding: 0;
}

mjx-container[jax="CHTML"][justify="left"] {
  text-align: left;
}

mjx-container[jax="CHTML"][justify="right"] {
  text-align: right;
}

mjx-mo {
  display: inline-block;
  text-align: left;
}

mjx-stretchy-h {
  display: inline-table;
  width: 100%;
}

mjx-stretchy-h > * {
  display: table-cell;
  width: 0;
}

mjx-stretchy-h > * > mjx-c {
  display: inline-block;
  transform: scalex(1.0000001);
}

mjx-stretchy-h > * > mjx-c::before {
  display: inline-block;
  width: initial;
}

mjx-stretchy-h > mjx-ext {
  /* IE */ overflow: hidden;
  /* others */ overflow: clip visible;
  width: 100%;
}

mjx-stretchy-h > mjx-ext > mjx-c::before {
  transform: scalex(500);
}

mjx-stretchy-h > mjx-ext > mjx-c {
  width: 0;
}

mjx-stretchy-h > mjx-beg > mjx-c {
  margin-right: -.1em;
}

mjx-stretchy-h > mjx-end > mjx-c {
  margin-left: -.1em;
}

mjx-stretchy-v {
  display: inline-block;
}

mjx-stretchy-v > * {
  display: block;
}

mjx-stretchy-v > mjx-beg {
  height: 0;
}

mjx-stretchy-v > mjx-end > mjx-c {
  display: block;
}

mjx-stretchy-v > * > mjx-c {
  transform: scaley(1.0000001);
  transform-origin: left center;
  overflow: hidden;
}

mjx-stretchy-v > mjx-ext {
  display: block;
  height: 100%;
  box-sizing: border-box;
  border: 0px solid transparent;
  /* IE */ overflow: hidden;
  /* others */ overflow: visible clip;
}

mjx-stretchy-v > mjx-ext > mjx-c::before {
  width: initial;
  box-sizing: border-box;
}

mjx-stretchy-v > mjx-ext > mjx-c {
  transform: scaleY(500) translateY(.075em);
  overflow: visible;
}

mjx-mark {
  display: inline-block;
  height: 0px;
}

mjx-c {
  display: inline-block;
}

mjx-utext {
  display: inline-block;
  padding: .75em 0 .2em 0;
}

mjx-mn {
  display: inline-block;
  text-align: left;
}

mjx-TeXAtom {
  display: inline-block;
  text-align: left;
}

mjx-c::before {
  display: block;
  width: 0;
}

.MJX-TEX {
  font-family: MJXZERO, MJXTEX;
}

.TEX-B {
  font-family: MJXZERO, MJXTEX-B;
}

.TEX-I {
  font-family: MJXZERO, MJXTEX-I;
}

.TEX-MI {
  font-family: MJXZERO, MJXTEX-MI;
}

.TEX-BI {
  font-family: MJXZERO, MJXTEX-BI;
}

.TEX-S1 {
  font-family: MJXZERO, MJXTEX-S1;
}

.TEX-S2 {
  font-family: MJXZERO, MJXTEX-S2;
}

.TEX-S3 {
  font-family: MJXZERO, MJXTEX-S3;
}

.TEX-S4 {
  font-family: MJXZERO, MJXTEX-S4;
}

.TEX-A {
  font-family: MJXZERO, MJXTEX-A;
}

.TEX-C {
  font-family: MJXZERO, MJXTEX-C;
}

.TEX-CB {
  font-family: MJXZERO, MJXTEX-CB;
}

.TEX-FR {
  font-family: MJXZERO, MJXTEX-FR;
}

.TEX-FRB {
  font-family: MJXZERO, MJXTEX-FRB;
}

.TEX-SS {
  font-family: MJXZERO, MJXTEX-SS;
}

.TEX-SSB {
  font-family: MJXZERO, MJXTEX-SSB;
}

.TEX-SSI {
  font-family: MJXZERO, MJXTEX-SSI;
}

.TEX-SC {
  font-family: MJXZERO, MJXTEX-SC;
}

.TEX-T {
  font-family: MJXZERO, MJXTEX-T;
}

.TEX-V {
  font-family: MJXZERO, MJXTEX-V;
}

.TEX-VB {
  font-family: MJXZERO, MJXTEX-VB;
}

mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c {
  font-family: MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important;
}

@font-face /* 0 */ {
  font-family: MJXZERO;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff") format("woff");
}

@font-face /* 1 */ {
  font-family: MJXTEX;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Regular.woff") format("woff");
}

@font-face /* 2 */ {
  font-family: MJXTEX-B;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff") format("woff");
}

@font-face /* 3 */ {
  font-family: MJXTEX-I;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-Italic.woff") format("woff");
}

@font-face /* 4 */ {
  font-family: MJXTEX-MI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Italic.woff") format("woff");
}

@font-face /* 5 */ {
  font-family: MJXTEX-BI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-BoldItalic.woff") format("woff");
}

@font-face /* 6 */ {
  font-family: MJXTEX-S1;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size1-Regular.woff") format("woff");
}

@font-face /* 7 */ {
  font-family: MJXTEX-S2;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size2-Regular.woff") format("woff");
}

@font-face /* 8 */ {
  font-family: MJXTEX-S3;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size3-Regular.woff") format("woff");
}

@font-face /* 9 */ {
  font-family: MJXTEX-S4;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size4-Regular.woff") format("woff");
}

@font-face /* 10 */ {
  font-family: MJXTEX-A;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_AMS-Regular.woff") format("woff");
}

@font-face /* 11 */ {
  font-family: MJXTEX-C;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Regular.woff") format("woff");
}

@font-face /* 12 */ {
  font-family: MJXTEX-CB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Bold.woff") format("woff");
}

@font-face /* 13 */ {
  font-family: MJXTEX-FR;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Regular.woff") format("woff");
}

@font-face /* 14 */ {
  font-family: MJXTEX-FRB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Bold.woff") format("woff");
}

@font-face /* 15 */ {
  font-family: MJXTEX-SS;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Regular.woff") format("woff");
}

@font-face /* 16 */ {
  font-family: MJXTEX-SSB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Bold.woff") format("woff");
}

@font-face /* 17 */ {
  font-family: MJXTEX-SSI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Italic.woff") format("woff");
}

@font-face /* 18 */ {
  font-family: MJXTEX-SC;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Script-Regular.woff") format("woff");
}

@font-face /* 19 */ {
  font-family: MJXTEX-T;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Typewriter-Regular.woff") format("woff");
}

@font-face /* 20 */ {
  font-family: MJXTEX-V;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Regular.woff") format("woff");
}

@font-face /* 21 */ {
  font-family: MJXTEX-VB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Bold.woff") format("woff");
}

mjx-c.mjx-c28::before {
  padding: 0.75em 0.389em 0.25em 0;
  content: "(";
}

mjx-c.mjx-c33::before {
  padding: 0.665em 0.5em 0.022em 0;
  content: "3";
}

mjx-c.mjx-c2B::before {
  padding: 0.583em 0.778em 0.082em 0;
  content: "+";
}

mjx-c.mjx-c35::before {
  padding: 0.666em 0.5em 0.022em 0;
  content: "5";
}

mjx-c.mjx-c29::before {
  padding: 0.75em 0.389em 0.25em 0;
  content: ")";
}

mjx-c.mjx-c2F::before {
  padding: 0.75em 0.5em 0.25em 0;
  content: "/";
}

mjx-c.mjx-c32::before {
  padding: 0.666em 0.5em 0 0;
  content: "2";
}
</style></head>

  <body cz-shortcut-listen="true">
    <div class="openbtn"><span></span><span></span><span></span></div>
    <nav id="g-nav">
      <div id="g-nav-list">
        <!-- ---------------------------------------- -->
         <ul>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E9%80%A3%E7%B5%A1" id="toc-é€£çµ¡"><span class="toc-section-number">1</span> é€£çµ¡</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E6%BA%96%E5%82%99%E3%81%A8%E5%89%8D%E5%9B%9E%E3%81%AE%E5%BE%A9%E7%BF%92" id="toc-æº–å‚™ã¨å‰å›ã®å¾©ç¿’"><span class="toc-section-number">2</span>
æº–å‚™ã¨å‰å›ã®å¾©ç¿’</a>
<ul>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E3%83%8F%E3%83%B3%E3%82%BA%E3%82%AA%E3%83%B3%E5%AD%A6%E7%BF%92%E3%81%AE%E6%BA%96%E5%82%99" id="toc-ãƒãƒ³ã‚ºã‚ªãƒ³å­¦ç¿’ã®æº–å‚™"><span class="toc-section-number">2.1</span> ãƒãƒ³ã‚ºã‚ªãƒ³å­¦ç¿’ã®æº–å‚™</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E5%89%8D%E5%9B%9E%E3%81%AE%E5%BE%A9%E7%BF%92" id="toc-å‰å›ã®å¾©ç¿’"><span class="toc-section-number">2.2</span>
å‰å›ã®å¾©ç¿’</a></li>
</ul></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B6%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3" id="toc-ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³"><span class="toc-section-number">3</span>
ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</a>
<ul>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B6%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%8C%E5%BF%85%E8%A6%81%E3%81%A8%E3%81%95%E3%82%8C%E3%82%8B%E7%90%86%E7%94%B1-%E9%8A%80%E8%A1%8C%E9%80%81%E9%87%91%E3%81%AE%E4%BE%8B" id="toc-ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã¨ã•ã‚Œã‚‹ç†ç”±-éŠ€è¡Œé€é‡‘ã®ä¾‹"><span class="toc-section-number">3.1</span>
ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã¨ã•ã‚Œã‚‹ç†ç”± (éŠ€è¡Œé€é‡‘ã®ä¾‹)</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B6%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E4%BD%BF%E7%94%A8%E4%BE%8B" id="toc-ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ä½¿ç”¨ä¾‹"><span class="toc-section-number">3.2</span> ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ä½¿ç”¨ä¾‹</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E6%98%8E%E7%A4%BA%E7%9A%84%E3%81%AA%E3%83%AD%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF" id="toc-æ˜ç¤ºçš„ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯"><span class="toc-section-number">3.3</span> æ˜ç¤ºçš„ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯</a></li>
</ul></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#csv%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8B%E3%82%89%E3%81%AEinsert" id="toc-csvãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®insert"><span class="toc-section-number">4</span> CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®INSERT</a>
<ul>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#csv-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90" id="toc-csv-ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ"><span class="toc-section-number">4.1</span> CSV ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#csv-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%AB%E9%85%8D%E7%BD%AE" id="toc-csv-ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«é…ç½®"><span class="toc-section-number">4.2</span> CSV ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«é…ç½®</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#csv-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8B%E3%82%89%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AB%E5%8F%96%E3%82%8A%E8%BE%BC%E3%81%BF" id="toc-csv-ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«ã«å–ã‚Šè¾¼ã¿"><span class="toc-section-number">4.3</span> CSV ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«ã«å–ã‚Šè¾¼ã¿</a></li>
</ul></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#delete%E6%96%87-%E5%9F%BA%E7%A4%8E%E7%B7%A8" id="toc-deleteæ–‡-åŸºç¤ç·¨"><span class="toc-section-number">5</span>
DELETEæ–‡ (åŸºç¤ç·¨)</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#update%E6%96%87-%E5%9F%BA%E7%A4%8E%E7%B7%A8" id="toc-updateæ–‡-åŸºç¤ç·¨"><span class="toc-section-number">6</span>
UPDATEæ–‡ (åŸºç¤ç·¨)</a>
<ul>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E5%80%A4%E3%82%92%E5%9B%BA%E5%AE%9A%E5%80%A4%E3%81%A7%E6%9B%B4%E6%96%B0" id="toc-ã™ã¹ã¦ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å€¤ã‚’å›ºå®šå€¤ã§æ›´æ–°"><span class="toc-section-number">6.1</span> ã™ã¹ã¦ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å€¤ã‚’å›ºå®šå€¤ã§æ›´æ–°</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E7%89%B9%E5%AE%9A%E3%81%AE%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E3%81%BF%E3%82%92%E6%9B%B4%E6%96%B0" id="toc-ç‰¹å®šã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿ã‚’æ›´æ–°"><span class="toc-section-number">6.2</span> ç‰¹å®šã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿ã‚’æ›´æ–°</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E7%8F%BE%E5%9C%A8%E3%81%AE%E5%80%A4%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E6%9B%B4%E6%96%B0" id="toc-ç¾åœ¨ã®å€¤ã‚’åˆ©ç”¨ã—ãŸæ›´æ–°"><span class="toc-section-number">6.3</span> ç¾åœ¨ã®å€¤ã‚’åˆ©ç”¨ã—ãŸæ›´æ–°</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#case%E5%BC%8F%E3%81%AB%E3%82%88%E3%82%8B%E5%90%8C%E6%99%82%E7%BD%AE%E6%8F%9B%E5%87%A6%E7%90%86" id="toc-caseå¼ã«ã‚ˆã‚‹åŒæ™‚ç½®æ›å‡¦ç†"><span class="toc-section-number">6.4</span> CASEå¼ã«ã‚ˆã‚‹åŒæ™‚ç½®æ›å‡¦ç†</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E8%A3%9C%E8%B6%B3-returning%E5%8F%A5" id="toc-è£œè¶³-returningå¥"><span class="toc-section-number">6.5</span> è£œè¶³: RETURNINGå¥</a></li>
</ul></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E9%9B%86%E7%B4%84%E9%96%A2%E6%95%B0-aggregate-function" id="toc-é›†ç´„é–¢æ•°-aggregate-function"><span class="toc-section-number">7</span> é›†ç´„é–¢æ•° (Aggregate Function)</a>
<ul>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#count%E9%96%A2%E6%95%B0" id="toc-counté–¢æ•°"><span class="toc-section-number">7.1</span>
COUNTé–¢æ•°</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#sum%E9%96%A2%E6%95%B0%E3%81%A8avg%E9%96%A2%E6%95%B0" id="toc-sumé–¢æ•°ã¨avgé–¢æ•°"><span class="toc-section-number">7.2</span> SUMé–¢æ•°ã¨AVGé–¢æ•°</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#max%E9%96%A2%E6%95%B0%E3%81%A8min%E9%96%A2%E6%95%B0" id="toc-maxé–¢æ•°ã¨miné–¢æ•°"><span class="toc-section-number">7.3</span> MAXé–¢æ•°ã¨MINé–¢æ•°</a></li>
</ul></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#group-by" id="toc-group-by"><span class="toc-section-number">8</span> GROUP BY</a>
<ul>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#group-by%E5%8F%A5%E3%81%AE%E4%BD%BF%E7%94%A8%E6%99%82%E3%81%ABselect%E5%8F%A5%E3%81%A7%E6%8C%87%E5%AE%9A%E5%8F%AF%E8%83%BD%E3%81%AA%E5%80%A4-%E9%87%8D%E8%A6%81" id="toc-group-byå¥ã®ä½¿ç”¨æ™‚ã«selectå¥ã§æŒ‡å®šå¯èƒ½ãªå€¤-é‡è¦"><span class="toc-section-number">8.1</span>
GROUP BYå¥ã®ä½¿ç”¨æ™‚ã«SELECTå¥ã§æŒ‡å®šå¯èƒ½ãªå€¤ (é‡è¦ğŸš¨)</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#group-by%E5%8F%A5%E3%81%AB%E8%A4%87%E6%95%B0%E3%81%AE%E9%9B%86%E7%B4%84%E3%82%AD%E3%83%BC%E3%82%92%E6%8C%87%E5%AE%9A" id="toc-group-byå¥ã«è¤‡æ•°ã®é›†ç´„ã‚­ãƒ¼ã‚’æŒ‡å®š"><span class="toc-section-number">8.2</span> GROUP BYå¥ã«è¤‡æ•°ã®é›†ç´„ã‚­ãƒ¼ã‚’æŒ‡å®š</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#rollup%E3%81%AB%E3%82%88%E3%82%8B%E5%85%A8%E4%BD%93%E9%9B%86%E8%A8%88" id="toc-rollupã«ã‚ˆã‚‹å…¨ä½“é›†è¨ˆ"><span class="toc-section-number">8.3</span> ROLLUPã«ã‚ˆã‚‹å…¨ä½“é›†è¨ˆ</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#group-by%E5%8F%A5%E3%81%ABcase%E5%BC%8F%E3%82%92%E5%88%A9%E7%94%A8" id="toc-group-byå¥ã«caseå¼ã‚’åˆ©ç”¨"><span class="toc-section-number">8.4</span> GROUP BYå¥ã«CASEå¼ã‚’åˆ©ç”¨</a></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#date_trunc%E9%96%A2%E6%95%B0%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%9F%E6%99%82%E9%96%93%E8%BB%B8%E3%81%AB%E6%B2%BF%E3%81%A3%E3%81%9F%E9%9B%86%E8%A8%88%E5%87%A6%E7%90%86" id="toc-date_truncé–¢æ•°ã‚’åˆ©ç”¨ã—ãŸæ™‚é–“è»¸ã«æ²¿ã£ãŸé›†è¨ˆå‡¦ç†"><span class="toc-section-number">8.5</span>
DATE_TRUNCé–¢æ•°ã‚’åˆ©ç”¨ã—ãŸæ™‚é–“è»¸ã«æ²¿ã£ãŸé›†è¨ˆå‡¦ç†</a></li>
</ul></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#having-%E5%8F%A5" id="toc-having-å¥"><span class="toc-section-number">9</span> HAVING å¥</a>
<ul>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#where%E5%8F%A5%E3%81%A8having%E5%8F%A5%E3%81%AE%E4%BD%BF%E3%81%84%E5%88%86%E3%81%91%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6" id="toc-whereå¥ã¨havingå¥ã®ä½¿ã„åˆ†ã‘ã«ã¤ã„ã¦"><span class="toc-section-number">9.1</span>
WHEREå¥ã¨HAVINGå¥ã®ä½¿ã„åˆ†ã‘ã«ã¤ã„ã¦</a></li>
</ul></li>
<li><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#%E6%8E%88%E6%A5%AD%E6%99%82%E9%96%93%E5%A4%96%E5%AD%A6%E7%BF%92%E3%81%AE%E6%8C%87%E7%A4%BA-%E5%AE%BF%E9%A1%8C" id="toc-æˆæ¥­æ™‚é–“å¤–å­¦ç¿’ã®æŒ‡ç¤º-å®¿é¡Œ"><span class="toc-section-number">10</span> æˆæ¥­æ™‚é–“å¤–å­¦ç¿’ã®æŒ‡ç¤º (å®¿é¡Œ)</a></li>
</ul> 
        <!-- ---------------------------------------- -->
      </div>
    </nav>

    <header class="markdown-body">
      <p>2025-4I ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å·¥å­¦ ç¬¬05å› è¬›ç¾©è³‡æ–™</p>
      <p>2025å¹´10æœˆ30æ—¥ (æœ¨) 3-4æ™‚é™</p>
    </header>

    <main class="markdown-body">
      <!-- ---------------------------------------- -->
      <h1 data-number="1" id="é€£çµ¡"><span class="header-section-number">1</span> é€£çµ¡</h1>
      <ul>
      <li>å°ãƒ†ã‚¹ãƒˆâ¹ ã‚’å®Ÿæ–½ã—ã¾ã™ã€‚
      <ul>
      <li>ã‚·ãƒ©ãƒã‚¹è¨˜è¼‰ã®ã‚ˆã†ã«ã€å°ãƒ†ã‚¹ãƒˆã¯æœ€çµ‚è©•ä¾¡ã® <span class="masked">35%</span>
      ã«ç›¸å½“ã—ã¾ã™ã€‚</li>
      <li>é…åˆ»ãƒ»æ¬ å¸­ç­‰ã«ã‚ˆã‚Šè¿½è©¦é¨“ã‚’å¸Œæœ›ã™ã‚‹å ´åˆã¯<a href="https://takeshiwada1980.github.io/DB-2025/lecture01.html#%E6%88%90%E7%B8%BE%E8%A9%95%E4%BE%A1%E6%B3%95%E3%81%A8%E5%B1%A5%E4%BF%AE%E4%B8%8A%E3%81%AE%E6%B3%A8%E6%84%8F">ç¬¬01å›è¬›ç¾©ã§æ¡ˆå†…ã—ãŸæ‰‹ç¶šã</a>ã‚’ã—ã¦ãã ã•ã„ã€‚</li>
      </ul></li>
      <li>ä»Šå›ã®è¬›ç¾©å†…å®¹ã¯ã€<a href="https://takeshiwada1980.github.io/DB-2025/lecture04.html">å‰å›è¬›ç¾©</a>ã®å†…å®¹ã‚’<strong>ã²ã¨ã¨ãŠã‚Šç†è§£ã—ã¦ã„ã‚‹ã“ã¨</strong>ã‚’å‰æã¨ã—ã¾ã™ã€‚ã¾ã ã€å‰å›ã®å†…å®¹
      (æˆæ¥­æ™‚é–“å¤–å­¦ç¿’ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å«ã‚€)
      ã‚’çµ‚ãˆã¦ã„ãªã„äººã¯ã€ã¾ãšã¯ã€ãã¡ã‚‰ã‹ã‚‰å–ã‚Šçµ„ã‚“ã§ãã ã•ã„ã€‚</li>
      </ul>
      <h1 data-number="2" id="æº–å‚™ã¨å‰å›ã®å¾©ç¿’"><span class="header-section-number">2</span>
      æº–å‚™ã¨å‰å›ã®å¾©ç¿’</h1>
      <h2 data-number="2.1" id="ãƒãƒ³ã‚ºã‚ªãƒ³å­¦ç¿’ã®æº–å‚™"><span class="header-section-number">2.1</span>
      ãƒãƒ³ã‚ºã‚ªãƒ³å­¦ç¿’ã®æº–å‚™</h2>
      <p>æ¬¡ã®æ‰‹é †ã§SQLæ¼”ç¿’ç’°å¢ƒã®ç«‹ã¡ä¸Šã’ã¨ã€æ•™æã®æ›´æ–°ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚</p>
      <ul>
      <li><a href="https://takeshiwada1980.github.io/DB-2025/lecture04.html#sql%E6%BC%94%E7%BF%92%E7%92%B0%E5%A2%83%E3%81%AE%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D-%E5%89%8D%E5%9B%9E%E5%BE%A9%E7%BF%92">SQLæ¼”ç¿’ç’°å¢ƒã®å‹•ä½œç¢ºèª</a>@
      ç¬¬04å›è¬›ç¾©</li>
      <li><a href="https://takeshiwada1980.github.io/DB-2025/lecture04.html#%E6%95%99%E6%9D%90%E3%81%AE%E6%9B%B4%E6%96%B0%E3%81%AE%E5%8F%96%E5%BE%97">æ•™æã®æ›´æ–°ã®å–å¾—</a>@ ç¬¬04å›è¬›ç¾©</li>
      </ul>
      <h2 data-number="2.2" id="å‰å›ã®å¾©ç¿’"><span class="header-section-number">2.2</span>
      å‰å›ã®å¾©ç¿’</h2>
      <p>å‰å›ã®è¬›ç¾©ã§ã¯ <code>SELECT</code> æ–‡ã«ãŠã‘ã‚‹ <code>ORDER BY</code> å¥ã€<code>LIMIT</code>
      å¥ã€<code>OFFSET</code> å¥ã€<code>WHERE</code> å¥ã«ã¤ã„ã¦å­¦ã³ã¾ã—ãŸã€‚</p>
      <ul>
      <li><code>ORDER BY</code> ã¯ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ã® <strong>æ•´åˆ—é † (ã‚½ãƒ¼ãƒˆé †) ã‚’æŒ‡å®šã™ã‚‹</strong>
      ãŸã‚ã®å¥ã§ã—ãŸã€‚</li>
      <li><code>LIMIT</code> ã¯ã€å–å¾—ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã® <strong>ä»¶æ•°ã‚’åˆ¶é™ã™ã‚‹</strong>
      ãŸã‚ã®å¥ã§ã—ãŸã€‚</li>
      <li><code>OFFSET</code> ã¯ã€ãƒ¬ã‚³ãƒ¼ãƒ‰ã® <strong>å–å¾—é–‹å§‹ä½ç½®ã‚’èª¿æ•´ã™ã‚‹ (ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹)</strong>
      ãŸã‚ã®å¥ã§ã—ãŸã€‚</li>
      <li><code>WHERE</code> ã¯ã€<strong>æŠ½å‡ºæ¡ä»¶ã‚’æŒ‡å®šã™ã‚‹</strong> ãŸã‚ã®å¥ã§ã—ãŸã€‚</li>
      </ul>
      <p>ã“ã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã€Œã©ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ã€ã€Œã©ã®é †ã§ã€ã€Œã©ã®ä½ç½®ã‹ã‚‰ã€ã€Œä½•ä»¶ã ã‘ã€å–ã‚Šå‡ºã™ã‹ã‚’æŸ”è»Ÿã«åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
      <div class="note type-tips">
      <p><strong>è£œè¶³ï¼š <code>WHERE</code> ã®æ„å‘³</strong></p>
      <p>SQL ã«ãŠã‘ã‚‹ <code>WHERE</code>
      ã¯ç–‘å•è©ã¨ã—ã¦ã®ã€Œ<strong>ã©ã“ï¼Ÿ</strong>ã€ã§ã¯ãªãã€ã€Œ<strong>ã€œã¨ã„ã†å ´æ‰€
      (ã€œã§ã‚ã‚‹ã‚ˆã†ãªè¡Œ)</strong>ã€ã¨ã„ã†é–¢ä¿‚å‰¯è©çš„ãªç”¨æ³•ã§ä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€<code>WHERE</code>
      å¥ã¯ã€Œ<strong>ã€œã¨ã„ã†æ¡ä»¶ã«è©²å½“ã™ã‚‹è¡Œã‚’é¸ã¶</strong>ã€ã¨ã„ã†æŒ‡ç¤ºã«ãªã‚Šã¾ã™ã€‚</p>
      <ul>
      <li>I came from Japan, <strong>where</strong> I was born and raised.</li>
      </ul>
      </div>
      <p>ã¾ãŸã€å‰å›è¬›ç¾©ã§ã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ <span class="masked">æŒ¿å…¥ã™ã‚‹</span>
      ãŸã‚ã®åŸºæœ¬çš„ãª <code>INSERT</code> æ–‡ã¨ã€<strong>ãã®å‹•ä½œ/æŒ™å‹•ã‚’å®‰å…¨ã«ç¢ºèªã™ã‚‹ãŸã‚</strong> ã®
      <strong><em>ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</em></strong> (<code>START TRANSACTION</code> ï½
      <code>ROLLBACK</code>) ã«ã¤ã„ã¦ã‚‚å­¦ã³ã¾ã—ãŸã€‚</p>
      <h1 data-number="3" id="ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³"><span class="header-section-number">3</span>
      ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</h1>
      <p>RDBMS ã«ãŠã„ã¦ã€<strong>ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³</strong> (<strong>Transaction</strong>)
      ã¨ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ä¸€è²«æ€§ã‚„æ•´åˆæ€§ã‚’ä¿ã¤ãŸã‚ã« <span class="masked">è«–ç†çš„ã«ã¾ã¨ã‚ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã¹ãä¸€é€£ã®æ“ä½œã‚„å‡¦ç†ã®ã‹ãŸã¾ã‚Š</span>
      ã‚’æ„å‘³ã—ã¾ã™ã€‚ãã—ã¦ã€RDBMS ã§ã¯ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«å¯¾ã—ã¦â€¦</p>
      <ul>
      <li><strong>ã™ã¹ã¦ã®å‡¦ç†ã‚’ã€ŒæˆåŠŸã€ã¨ã—ã¦ç¢ºå®šã•ã›ã‚‹</strong> ğŸ‘‰
      <strong><em>ã‚³ãƒŸãƒƒãƒˆ</em></strong></li>
      <li><strong>ã™ã¹ã¦ã®å‡¦ç†ã‚’ã€Œå¤±æ•—ã€ã¨ã—ã¦æ“ä½œã‚’å–ã‚Šæ¶ˆã—ã¦å…ƒã«æˆ»ã™</strong> ğŸ‘‰
      <strong><em>ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯</em></strong></li>
      </ul>
      <p>â€¦ã®ã€Œ<strong>ã„ãšã‚Œã‹ã®çµæœã®ã¿</strong>ã€ã‚’ä¿è¨¼ã—ã¾ã™ã€‚</p>
      <p>ä¾‹ãˆã°ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ãªã‹ã« <code>SQL-1</code>ã€<code>SQL-2</code>ã€<code>SQL-3</code>
      ã¨ã„ã†3ã¤ã® SQL æ–‡ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨ãâ€¦</p>
      <ul>
      <li><code>SQL-1</code> ã¨ <code>SQL-2</code> ã¯<strong>æˆåŠŸ</strong>ã—ã€<code>SQL-3</code>
      ã¯<strong>å¤±æ•—</strong>ã—ãŸ</li>
      </ul>
      <p>â€¦ã¨ã„ã£ãŸ <strong>ä¸­é€”åŠç«¯ãªçµæœãŒç”Ÿã˜ãªã„ã‚ˆã†ã«ä¿è¨¼</strong>
      ã™ã‚‹æ©Ÿèƒ½ã‚’æŒã¡ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ <code>SQL-3</code> ãŒå¤±æ•—ã—ãŸæ™‚ç‚¹ã§ã€RDBMS ã¯
      <code>SQL-1</code> ã¨ <code>SQL-2</code> ã®æ“ä½œã‚’ç„¡åŠ¹ã«ã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ <span class="masked">ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³é–‹å§‹å‰ã®çŠ¶æ…‹</span> ã«æˆ»ã—ã¾ã™ã€‚</p>
      <h2 data-number="3.1" id="ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã¨ã•ã‚Œã‚‹ç†ç”±-éŠ€è¡Œé€é‡‘ã®ä¾‹"><span class="header-section-number">3.1</span> ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã¨ã•ã‚Œã‚‹ç†ç”±
      (éŠ€è¡Œé€é‡‘ã®ä¾‹)</h2>
      <p>ä¸€èˆ¬ã«ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¯æ¬¡ã®ã‚ˆã†ãªå ´é¢ã§éå¸¸ã«å¼·åŠ›ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚</p>
      <blockquote>
      <p>é é‡‘ç®¡ç† DB ã«ãŠã„ã¦ Alice ã‹ã‚‰ Bob ã« 10,000 å††ã‚’ç§»ã™</p>
      </blockquote>
      <p>ã“ã®é€é‡‘å‡¦ç†ã¯ã€å®Ÿéš›ã«ã¯æ¬¡ã®ã‚ˆã†ãª <strong>2ã¤ã®æ“ä½œã‹ã‚‰æ§‹æˆ</strong> ã•ã‚Œã¾ã™ã€‚</p>
      <ol type="1">
      <li>Alice ã®å£åº§æ®‹é«˜ã‹ã‚‰ 10,000 å††ã‚’æ¸›ç®—ã™ã‚‹</li>
      <li>Bob ã®å£åº§æ®‹é«˜ã« 10,000å†† ã‚’åŠ ç®—ã™ã‚‹</li>
      </ol>
      <p>ã“ã® 2
      ã¤ã®æ“ä½œã¯ã€<strong>ã©ã¡ã‚‰ã‹ä¸€æ–¹ã ã‘ãŒæˆåŠŸã—ã¦ã‚‚æ­£ã—ã„çŠ¶æ…‹ã¨ã¯ã„ãˆã¾ã›ã‚“</strong>ã€‚Alice
      ã®æ®‹é«˜ã ã‘ãŒæ¸›ã£ã¦ Bob ã«æŒ¯ã‚Šè¾¼ã¾ã‚Œãªã‘ã‚Œã°ã€ŒãŠé‡‘ãŒæ¶ˆãˆã‚‹ã€ã“ã¨ã«ãªã£ã¦ã—ã¾ã„ã€é€†ã« Bob
      ã ã‘ã«å…¥é‡‘ã•ã‚Œã¦ Alice
      ã®æ®‹é«˜ãŒæ¸›ã‚‰ãªã‘ã‚Œã°ã€ŒãŠé‡‘ãŒå¢—ãˆã‚‹ã€ã“ã¨ã«ãªã£ã¦ã—ã¾ã„ã€ã„ãšã‚Œã‚‚ä¸æ•´åˆãªçŠ¶æ…‹ã¨ãªã‚Šã¾ã™ã€‚</p>
      <p>ãã“ã§ RDBMS
      ã§ã¯ã€ã“ã‚Œã‚‰ã®2ã¤ã®æ“ä½œã‚’ã€Œã²ã¨ã¤ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã€ã¨ã—ã¦ã¾ã¨ã‚ã¦æ‰±ã†ã“ã¨ã§ã€é€”ä¸­ã§ã©ã¡ã‚‰ã‹ã®æ“ä½œãŒå¤±æ•—ã—ãŸå ´åˆã«ã¯ã€<strong><em>ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯</em></strong>
      ã«ã‚ˆã‚Š <span class="masked">å…¨ã¦ã®æ“ä½œã‚’å–ã‚Šæ¶ˆã—ã¦å…ƒã®çŠ¶æ…‹ã«æˆ»ã™</span> ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§
      (ä¸€è²«æ€§) ã‚’ä¿ã¤ä»•çµ„ã¿ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚é€†ã«ã€ã™ã¹ã¦ã®æ“ä½œãŒæ­£å¸¸ã«å®Œäº†ã—ãŸã¨ãã«ã®ã¿
      <strong><em>ã‚³ãƒŸãƒƒãƒˆ</em></strong> ã«ã‚ˆã‚Šå‡¦ç†ã‚’ç¢ºå®šã™ã‚‹ä»•çµ„ã¿ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>
      <h2 data-number="3.2" id="ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ä½¿ç”¨ä¾‹"><span class="header-section-number">3.2</span> ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ä½¿ç”¨ä¾‹</h2>
      <p>ã“ã“ã§ã¯ <strong>s_users</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ã£ã¦ã€Œãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã€ã‚’ç¢ºèªã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã¯ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§
      <strong>s_users</strong> ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„ã€‚</p>
      <pre><code>npm run sql from-teacher/03/init-s_users.sql</code></pre>
      <p>ç¾åœ¨ã€ã“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯ã€Alice ã¨ Bob
      ã®2ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¾ã™ã€‚ã“ã®çŠ¶æ…‹ã‹ã‚‰ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ 3
      ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã—ã¦ã„ãã¾ã™ã€‚<code>sql/05/tmp.sql</code>
      ãªã©ã®é©å½“ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã€ä»¥ä¸‹ã® SQL ã‚’è²¼ã‚Šä»˜ã‘ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p>
      <div class="sourceCode" id="cb2" data-caption="ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï½å…¨æˆåŠŸã—ã¦ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹ä¾‹ï½"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb2-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-1"></a><span class="co">-- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹</span></span>
<span id="cb2-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-2"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb2-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-3"></a></span>
<span id="cb2-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-4"></a><span class="co">-- æ“ä½œ1 Carol ã®ç™»éŒ² (æˆåŠŸ)</span></span>
<span id="cb2-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-5"></a><span class="kw">INSERT</span> <span class="kw">INTO</span></span>
<span id="cb2-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-6"></a>  s_users (<span class="kw">id</span>, name, age)</span>
<span id="cb2-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-7"></a><span class="kw">VALUES</span></span>
<span id="cb2-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-8"></a>  (<span class="dv">3</span>, <span class="st">'Carol'</span>, <span class="dv">18</span>);</span>
<span id="cb2-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-9"></a></span>
<span id="cb2-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-10"></a><span class="co">-- æ“ä½œ2 Dave ã®ç™»éŒ² (æˆåŠŸ)</span></span>
<span id="cb2-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-11"></a><span class="kw">INSERT</span> <span class="kw">INTO</span></span>
<span id="cb2-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-12"></a>  s_users (<span class="kw">id</span>, name, age)</span>
<span id="cb2-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-13"></a><span class="kw">VALUES</span></span>
<span id="cb2-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-14"></a>  (<span class="dv">4</span>, <span class="st">'Dave'</span>, <span class="kw">NULL</span>);</span>
<span id="cb2-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-15"></a></span>
<span id="cb2-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-16"></a><span class="co">-- æ“ä½œ3 Ellen ã®ç™»éŒ² (æˆåŠŸ)</span></span>
<span id="cb2-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-17"></a><span class="kw">INSERT</span> <span class="kw">INTO</span></span>
<span id="cb2-18"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-18"></a>  s_users (<span class="kw">id</span>, name, age)</span>
<span id="cb2-19"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-19"></a><span class="kw">VALUES</span></span>
<span id="cb2-20"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-20"></a>  (<span class="dv">5</span>, <span class="st">'Ellen'</span>, <span class="dv">17</span>);</span>
<span id="cb2-21"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-21"></a></span>
<span id="cb2-22"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-22"></a><span class="co">-- START TRANSACTION ä»¥é™ã®å…¨ã¦ã®æ“ä½œãŒæˆåŠŸã—ã¦ã„ã‚Œã°ã€Œç¢ºå®šã€</span></span>
<span id="cb2-23"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-23"></a><span class="kw">COMMIT</span>;</span>
<span id="cb2-24"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-24"></a></span>
<span id="cb2-25"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-25"></a><span class="co">-- ãƒ†ãƒ¼ãƒ–ãƒ«ã®çŠ¶æ…‹ã‚’ç¢ºèª</span></span>
<span id="cb2-26"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb2-26"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> s_users;</span></code></pre></div>
      <p>ã“ã®ä¾‹ã§ã¯ã€<code>START TRANSACTION</code> ã‹ã‚‰ <code>COMMIT</code>
      ã¾ã§ã«å«ã¾ã‚Œã‚‹ã™ã¹ã¦ã®æ“ä½œ (æ“ä½œ1ã‹ã‚‰æ“ä½œ3) ãŒæ­£å¸¸å®Œäº†ã™ã‚‹ãŸã‚ã€<strong>ç¬¬23è¡Œç›®</strong> ã®
      <code>COMMIT</code>
      ã«ã‚ˆã£ã¦å‡¦ç†ãŒç¢ºå®šã•ã‚Œã€çµæœãŒãƒ†ãƒ¼ãƒ–ãƒ«ã«åæ˜ ã•ã‚Œã¾ã™ã€‚ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã¯ã€<strong>ç¬¬26è¡Œç›®</strong>
      ã«ã‚ˆã£ã¦æ¬¡ã®ã‚ˆã†ãªçµæœãŒå‡ºåŠ›ã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚</p>
      <pre><code>START TRANSACTION
INSERT 0 1
INSERT 0 1
INSERT 0 1
COMMIT
 id | name  | age
----+-------+-----
  1 | Alice |  20
  2 | Bob   |  25
  3 | Carol |  18
  4 | Dave  |
  5 | Ellen |  17
(5 è¡Œ)  </code></pre>
      <p>ã“ã“ã§ã€ä¸Šè¨˜ã® <strong>ç¬¬2è¡Œç›®</strong> ã‹ã‚‰ <strong>ç¬¬4è¡Œç›®</strong> ã®
      <code>INSERT 0 1</code> ã¯ <span class="masked">å„æ“ä½œã§1ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæŒ¿å…¥ã•ã‚ŒãŸã“ã¨</span>
      ã‚’è¡¨ã™å¿œç­”ã§ã™ã€‚<code>0</code> ã¯ã€ OID (Object Identifier)
      ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€æ°—ã«ãªã‚‹äººã¯ç”ŸæˆAIã‚’ä½¿ã£ã¦èª¿ã¹ã¦ãã ã•ã„ã€‚</p>
      <ul>
      <li>å³å¯†ã«ã¯ã€æŒ¿å…¥å…ˆãƒ†ãƒ¼ãƒ–ãƒ«ãŒ OID ã‚’æŒã¤ãªã‚‰ OIDã€ãã†ã§ãªã‘ã‚Œã° <code>0</code>
      ã®å¿œç­”ã‚’æŒã¡ã¾ã™ã€‚</li>
      </ul>
      <p><strong>(ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹)</strong></p>
      <blockquote>
      <p>PostgreSQL 17 ã§ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã«1ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰æŒ¿å…¥ã—ãŸã¨ãã€<code>INSERT 0 1</code>
      ã®ã‚ˆã†ãªå¿œç­”ãŒè¿”ã£ã¦ãã¾ã™ã€‚ã“ã“ã§ã® <code>0</code> ã¯ã€ã©ã®ã‚ˆã†ãªæ„å‘³ã§ã™ã‹ã€‚</p>
      </blockquote>
      <hr>
      <p>ã¤ã¥ã„ã¦ã€<strong>ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®é€”ä¸­ã§å¤±æ•—ãŒç™ºç”Ÿã™ã‚‹ä¾‹</strong>
      ã‚’ç¢ºèªã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã¯ã€å†åº¦ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ <strong>s_users</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹ã‚’åˆæœŸåŒ–ã—ã¦ãã ã•ã„ (ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’2ä»¶ã«æˆ»ã—ã¦ãŠãã¾ã™)ã€‚</p>
      <pre><code>npm run sql from-teacher/03/init-s_users.sql</code></pre>
      <p>ä»¥ä¸‹ã® SQL ã‚’è²¼ã‚Šä»˜ã‘ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ <strong>ç¬¬17è¡Œç›®</strong> ã‹ã‚‰ã®
      <code>INSERT</code> æ–‡ã« <strong>id</strong>
      ã®é‡è¤‡ãŒã‚ã‚Šã€ã€Œ<strong>æ“ä½œ3</strong>ã€ãŒå¤±æ•—ã™ã‚‹ (ï¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹)
      ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb5" data-caption="ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ï½å¤±æ•—ã«ã‚ˆã‚‹ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ä¾‹ï½"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb5-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-1"></a><span class="co">-- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹</span></span>
<span id="cb5-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-2"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb5-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-3"></a></span>
<span id="cb5-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-4"></a><span class="co">-- æ“ä½œ1 Carol ã®ç™»éŒ² (æˆåŠŸ)</span></span>
<span id="cb5-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-5"></a><span class="kw">INSERT</span> <span class="kw">INTO</span></span>
<span id="cb5-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-6"></a>  s_users (<span class="kw">id</span>, name, age)</span>
<span id="cb5-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-7"></a><span class="kw">VALUES</span></span>
<span id="cb5-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-8"></a>  (<span class="dv">3</span>, <span class="st">'Carol'</span>, <span class="dv">18</span>);</span>
<span id="cb5-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-9"></a></span>
<span id="cb5-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-10"></a><span class="co">-- æ“ä½œ2 Dave ã®ç™»éŒ² (æˆåŠŸ)</span></span>
<span id="cb5-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-11"></a><span class="kw">INSERT</span> <span class="kw">INTO</span></span>
<span id="cb5-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-12"></a>  s_users (<span class="kw">id</span>, name, age)</span>
<span id="cb5-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-13"></a><span class="kw">VALUES</span></span>
<span id="cb5-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-14"></a>  (<span class="dv">4</span>, <span class="st">'Dave'</span>, <span class="kw">NULL</span>);</span>
<span id="cb5-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-15"></a></span>
<span id="cb5-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-16"></a><span class="co">-- æ“ä½œ3 Ellen ã®ç™»éŒ² (âŒå¤±æ•— id=4 ãŒé‡è¤‡) </span></span>
<span id="cb5-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-17"></a><span class="kw">INSERT</span> <span class="kw">INTO</span></span>
<span id="cb5-18"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-18"></a>  s_users (<span class="kw">id</span>, name, age)</span>
<span id="cb5-19"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-19"></a><span class="kw">VALUES</span></span>
<span id="cb5-20"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-20"></a>  (<span class="dv">4</span>, <span class="st">'Ellen'</span>, <span class="dv">17</span>);</span>
<span id="cb5-21"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-21"></a></span>
<span id="cb5-22"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-22"></a><span class="co">-- START TRANSACTION ä»¥é™ã®å…¨ã¦ã®æ“ä½œãŒæˆåŠŸã—ã¦ã„ã‚Œã°ã€Œç¢ºå®šã€</span></span>
<span id="cb5-23"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-23"></a><span class="kw">COMMIT</span>;</span>
<span id="cb5-24"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-24"></a></span>
<span id="cb5-25"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-25"></a><span class="co">-- ãƒ†ãƒ¼ãƒ–ãƒ«ã®çŠ¶æ…‹ã‚’ç¢ºèª</span></span>
<span id="cb5-26"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb5-26"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> s_users;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>psql:&lt;stdin&gt;:20: ERROR:  é‡è¤‡ã—ãŸã‚­ãƒ¼å€¤ã¯ä¸€æ„æ€§åˆ¶ç´„"s_users_pkey"é•åã¨ãªã‚Šã¾ã™
DETAIL:  ã‚­ãƒ¼ (id)=(4) ã¯ã™ã§ã«å­˜åœ¨ã—ã¾ã™ã€‚</code></pre>
      <p>ã“ã“ã§æ³¨ç›®ã—ã¦ã»ã—ã„ã®ã¯ã€ã€Œæ“ä½œ1ã€ã¨ã€Œæ“ä½œ2ã€ã«ã¤ã„ã¦ã® <span class="masked"><code>INSERT 0 1</code>
      ã¨ã„ã†å¿œç­”ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãªã„ã“ã¨</span>ã€ãã—ã¦ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã«è¨˜è¿°ã•ã‚ŒãŸ
      <strong>ç¬¬26è¡Œç›®</strong> ã® <code>SELECT</code>
      æ–‡ã‚‚<strong>å®Ÿè¡Œã•ã‚Œã¦ã„ãªã„ã“ã¨</strong>ã§ã™ã€‚</p>
      <p>ã“ã®çŠ¶æ…‹ã§ã€åˆ¥é€” <code>SELECT * FROM s_users;</code> ã‚’å˜ç‹¬ã§å®Ÿè¡Œã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªçµæœ
      (ï¼<span class="masked">ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³é–‹å§‹å‰ã®çŠ¶æ…‹</span>) ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>
      <pre><code> id | name  | age 
----+-------+-----
  1 | Alice |  20
  2 | Bob   |  25
(2 è¡Œ)</code></pre>
      <p>ä»¥ä¸Šã®ã‚ˆã†ã«ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ãªã‹ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã¨ã€<strong>ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ãªã‹ã®å…¨ã¦ã®æ“ä½œãŒå–ã‚Šæ¶ˆã•ã‚Œã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹å‰ã®çŠ¶æ…‹ã«æˆ»ã‚‹ã“ã¨</strong>
      (ï¼ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã•ã‚Œã‚‹ã“ã¨) ãŒç¢ºèªã§ãã¾ã—ãŸã€‚</p>
      <h2 data-number="3.3" id="æ˜ç¤ºçš„ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯"><span class="header-section-number">3.3</span>
      æ˜ç¤ºçš„ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯</h2>
      <p><code>START TRANSACTION</code> ï½ <code>COMMIT</code> ã«ãŠã„ã¦ã€<code>COMMIT</code>
      ã®ä»£ã‚ã‚Šã« <span class="masked"><code>ROLLBACK</code></span> ã‚’è¨˜è¿°ã™ã‚‹ã¨æ˜ç¤ºçš„ã«
      <strong>ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯</strong> ã‚’ã‹ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb8" data-caption="æ˜ç¤ºçš„ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®å®Ÿè¡Œ"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb8-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-1"></a><span class="co">-- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹</span></span>
<span id="cb8-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-2"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb8-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-3"></a></span>
<span id="cb8-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-4"></a><span class="kw">INSERT</span> <span class="kw">INTO</span></span>
<span id="cb8-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-5"></a>  s_users (<span class="kw">id</span>, name, age)</span>
<span id="cb8-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-6"></a><span class="kw">VALUES</span></span>
<span id="cb8-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-7"></a>  (<span class="dv">3</span>, <span class="st">'Carol'</span>, <span class="dv">18</span>);</span>
<span id="cb8-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-8"></a></span>
<span id="cb8-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-9"></a><span class="co">-- ãƒ†ãƒ¼ãƒ–ãƒ«ã®çŠ¶æ…‹ã‚’ç¢ºèª ğŸ‘‰ Carol ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå­˜åœ¨ã™ã‚‹</span></span>
<span id="cb8-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-10"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> s_users;</span>
<span id="cb8-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-11"></a></span>
<span id="cb8-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-12"></a><span class="co">-- æ˜ç¤ºçš„ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å®Ÿè¡Œ</span></span>
<span id="cb8-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-13"></a><span class="kw">ROLLBACK</span>;</span>
<span id="cb8-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-14"></a></span>
<span id="cb8-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-15"></a><span class="co">-- ãƒ†ãƒ¼ãƒ–ãƒ«ã®çŠ¶æ…‹ã‚’ç¢ºèª ğŸ‘‰ Carol ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå­˜åœ¨ã—ãªã„</span></span>
<span id="cb8-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb8-16"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> s_users;</span></code></pre></div>
      <div class="note type-caution">
      <p><strong>æ³¨æ„</strong></p>
      <p>ä»¥ä¸‹ã€æ¼”ç¿’ã®ãªã‹ã§ <code>UPDATE</code> æ–‡ã‚„ <code>DELETE</code>
      æ–‡ã‚’æ‰±ã„ã¾ã™ãŒã€ç‰¹ã«æŒ‡ç¤ºã®ãªã„ã‹ãã‚Šã¯ã€Œ<code>START TRANSACTION</code> ï½
      <code>ROLLBACK</code>ã€ã®å†…éƒ¨ã§å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚</p>
      </div>
      <h3 data-number="3.3.1" id="å®šç€ç¢ºèª"><span class="header-section-number">3.3.1</span>
      å®šç€ç¢ºèª</h3>
      <ul>
      <li>PostgreSQL ã«ãŠã„ã¦ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã™ã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ SQL ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ (2èª)
      ã‚’ç­”ãˆã‚ˆã€‚å¤§æ–‡å­—ã§ç­”ãˆã‚‹ã“ã¨ã€‚
      <ul>
      <li><strong>ç­”ãˆ</strong> : <span class="masked"><code>START TRANSACTION</code></span></li>
      </ul></li>
      <li>PostgreSQL ã«ãŠã„ã¦ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’å–ã‚Šæ¶ˆã™ (å…ƒã«æˆ»ã™) éš›ã«ä½¿ç”¨ã™ã‚‹ SQL
      ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ç­”ãˆã‚ˆã€‚å¤§æ–‡å­—ã§ç­”ãˆã‚‹ã“ã¨ã€‚
      <ul>
      <li><strong>ç­”ãˆ</strong> : <span class="masked"><code>ROLLBACK</code></span></li>
      </ul></li>
      <li>PostgreSQL ã«ãŠã„ã¦ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã®å‡¦ç†ã‚’ç¢ºå®šã™ã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ SQL
      ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ç­”ãˆã‚ˆã€‚å¤§æ–‡å­—ã§ç­”ãˆã‚‹ã“ã¨ã€‚
      <ul>
      <li><strong>ç­”ãˆ</strong> : <span class="masked"><code>COMMIT</code></span></li>
      </ul></li>
      </ul>
      <h1 data-number="4" id="csvãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®insert"><span class="header-section-number">4</span>
      CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®INSERT</h1>
      <p><a href="https://takeshiwada1980.github.io/DB-2025/lecture04.html#insert%E6%96%87-%E8%B6%85%E5%9F%BA%E7%A4%8E%E7%B7%A8">å‰å›è¬›ç¾©</a>ã§ã¯ <code>INSERT</code>
      æ–‡ã‚’ä½¿ã£ã¦ã€Œãƒ†ãƒ¼ãƒ–ãƒ«ã« 1
      ä»¶ãšã¤ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã™ã‚‹æ–¹æ³•ã€ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€å®Ÿå‹™ã§ã¯ã€<strong>æ•°åä»¶ã‹ã‚‰æ•°åƒä»¶ã¨ã„ã£ãŸå¤§é‡ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ã“ã¨ãŒå¤šã</strong>ã€ãã®ã‚ˆã†ãªã¨ãã¯ã€Œ<strong>CSVãƒ•ã‚¡ã‚¤ãƒ«</strong>ã€ã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ‹¬æŒ¿å…¥ã™ã‚‹ã“ã¨ãŒä¸€èˆ¬çš„ã¨ãªã‚Šã¾ã™ã€‚</p>
      <p>ã“ã“ã§ã¯ã€CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ‹¬æŒ¿å…¥ã™ã‚‹æ‰‹é †ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</p>
      <h2 data-number="4.1" id="csv-ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ"><span class="header-section-number">4.1</span>
      CSV ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ</h2>
      <p>ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŒ¿å…¥ã™ã‚‹ãŸã‚ã®ã€ŒCSVãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€<strong>s_users</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ç”¨ã«äºˆã‚ç”¨æ„ã—ãŸ <code>from-teacher/05/insert-s_users.csv</code>
      (æœ€æ–°ã®æ•™æã®æ›´æ–°ã«å«ã¾ã‚Œã¦ã„ã¾ã™) ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
      <p>VSCode ã‹ã‚‰ <code>insert-s_users.csv</code> ã‚’é–‹ã„ã¦å†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <p>ãªãŠã€PostgreSQL ã«æŒ¿å…¥ã™ã‚‹ãŸã‚ã® CSV ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹éš›ã¯ã€<strong>æ–‡å­—ã‚³ãƒ¼ãƒ‰</strong>ã‚’
      <span class="masked">BOMãªã—ã®UTF-8</span>ã€<strong>æ”¹è¡Œã‚³ãƒ¼ãƒ‰</strong>ã‚’ã€Œ<strong>LF</strong>ã€ã«è¨­å®šã—ã¦ãŠãã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚</p>
      <p><strong>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹</strong></p>
      <blockquote>
      <p>UTF-8ã®ã€ŒBOMä»˜ãã€ã¨ã€ŒBOMãªã—ã€ã®é•ã„ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚ã€ŒBOMä»˜ãã€ãŒåˆ©ç”¨ã•ã‚Œã‚‹å ´é¢ã¨ã—ã¦ã¯ã©ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã‹ã€‚</p>
      </blockquote>
      <h2 data-number="4.2" id="csv-ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«é…ç½®"><span class="header-section-number">4.2</span> CSV ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«é…ç½®</h2>
      <p><code>insert-s_users.csv</code> ã¯ã€ãƒ›ã‚¹ãƒˆOS (Windows) ä¸Šã«å­˜åœ¨ã™ã‚‹ãŸã‚ã€<strong>Docker
      ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å‹•ä½œã—ã¦ã„ã‚‹ PostgreSQL ã‹ã‚‰ã¯ç›´æ¥å–ã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã¾ã›ã‚“</strong>ã€‚</p>
      <p>ãã®ãŸã‚ã€ã¾ãšã“ã® CSV ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã® <code>/tmp/</code> ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚VSCode
      ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚ã‚³ãƒãƒ³ãƒ‰ã®ãªã‹ã® <code>pg17</code>
      ã¯<i class="fa-brands fa-github"></i><a href="https://github.com/TakeshiWada1980/DB-2025-PostgreSQL/blob/main/docker/docker-compose.yaml">docker/docker-compose.yaml</a>ã®
      <strong>ç¬¬04è¡Œç›®</strong> ã§æŒ‡å®šã—ã¦ã„ã‚‹ PostgreSQL ã‚³ãƒ³ãƒ†ãƒŠã®ã€Œåå‰ã€ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>docker cp from-teacher/05/insert-s_users.csv pg17:/tmp/</code></pre>
      <p>ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼ã«æˆåŠŸã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¿”ã£ã¦ãã¾ã™ã€‚</p>
      <pre><code>Successfully copied 2.05kB to pg17:/tmp/</code></pre>
      <p>ã‚³ãƒ”ãƒ¼ãŒå®Œäº†ã—ãŸã‚‰ã€å®Ÿéš›ã«ã‚³ãƒ³ãƒ†ãƒŠã®ãªã‹ã«CSVãƒ•ã‚¡ã‚¤ãƒ«ãŒé…ç½®ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã—ã¦ã„ãã¾ã™ã€‚<a href="https://takeshiwada1980.github.io/DB-2025/lecture02.html#%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%AE%E5%88%A9%E7%94%A8-bash%E7%B5%8C%E7%94%B1">ç¬¬02å›è¬›ç¾©</a> ã§ç´¹ä»‹ã—ãŸã‚ˆã†ã«
      <code>docker container exec -it pg17 bash</code>
      ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã«æ¥ç¶šã—ã¦ã‚‚ã‚ˆã„ã§ã™ãŒã€ã“ã“ã§ã¯ <span class="masked">Docker
      Desktop</span> ã‹ã‚‰ç¢ºèªã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ãŠãã¾ã™ã€‚</p>
      <p>Docker Desktop
      ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã€Œ<strong>Containers</strong>ã€ã‚’é¸æŠã—ã€ã•ã‚‰ã«ã€Œ<strong>pg17</strong>ã€ã®ä¸‰ç‚¹ãƒªãƒ¼ãƒ€
      <i class="fa-solid fa-ellipsis-vertical"></i> ã‹ã‚‰ã€Œ<strong>Open in
      terminal</strong>ã€ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>
      <figure>
      <img src="./ç¬¬05å› 4I-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å·¥å­¦_files/docker-01.png" alt="img">
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>ã“ã‚Œã§ã€ã‚³ãƒ³ãƒ†ãƒŠã® <strong>bash</strong> ã«æ¥ç¶šã—ãŸçŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚<code>ls -al /tmp</code>
      ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã® <code>/tmp</code> ã« CSV ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <figure>
      <img src="./ç¬¬05å› 4I-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å·¥å­¦_files/docker-02.png" alt="img">
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h2 data-number="4.3" id="csv-ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«ã«å–ã‚Šè¾¼ã¿"><span class="header-section-number">4.3</span> CSV ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«ã«å–ã‚Šè¾¼ã¿</h2>
      <p>PostgreSQL ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãª SQL ã«ã‚ˆã‚Šã€<strong>CSV
      ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä¸€æ‹¬ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã«å–ã‚Šè¾¼ã‚€ã“ã¨</strong>ãŒã§ãã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb11" data-caption="CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb11-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-1"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb11-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-2"></a></span>
<span id="cb11-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-3"></a><span class="co">-- ãƒ¬ã‚³ãƒ¼ãƒ‰æŒ¿å…¥å‰ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¢ºèª</span></span>
<span id="cb11-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-4"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> s_users;</span>
<span id="cb11-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-5"></a></span>
<span id="cb11-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-6"></a><span class="co">-- CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥</span></span>
<span id="cb11-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-7"></a><span class="kw">COPY</span> <span class="kw">public</span>.s_users (<span class="kw">id</span>, name, age)</span>
<span id="cb11-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-8"></a><span class="kw">FROM</span></span>
<span id="cb11-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-9"></a>  <span class="st">'/tmp/insert-s_users.csv'</span></span>
<span id="cb11-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-10"></a><span class="kw">WITH</span></span>
<span id="cb11-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-11"></a>  (FORMAT csv, <span class="kw">HEADER</span> <span class="kw">TRUE</span>, <span class="kw">NULL</span> <span class="st">'NULL'</span>, ENCODING <span class="st">'UTF8'</span>);</span>
<span id="cb11-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-12"></a></span>
<span id="cb11-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-13"></a><span class="co">-- ãƒ¬ã‚³ãƒ¼ãƒ‰æŒ¿å…¥å¾Œã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¢ºèª</span></span>
<span id="cb11-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-14"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> s_users;</span>
<span id="cb11-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-15"></a></span>
<span id="cb11-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb11-16"></a><span class="kw">ROLLBACK</span>;</span></code></pre></div>
      <p><code>COPY</code> ã¯ <strong>PostgreSQL ç‹¬è‡ªã®ã‚³ãƒãƒ³ãƒ‰</strong> ã§ã€CSV
      ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã®å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’ <span class="masked">é«˜é€Ÿ</span>
      ã«å–ã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚<code>FROM</code> å¥ã§æŒ‡å®šã™ã‚‹ãƒ‘ã‚¹ (ã“ã“ã§ã¯
      <code>/tmp/insert-s_users.csv</code>) ã¯ã€Docker ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
      ã¨ã„ã†ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>
      <p>ã¾ãŸã€<code>WITH</code> å¥ (<strong>ç¬¬11è¡Œç›®</strong>)
      ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚</p>
      <ul>
      <li><code>FORMAT csv</code> : ãƒ•ã‚¡ã‚¤ãƒ«ãŒ CSV å½¢å¼ã§ã‚ã‚‹ã“ã¨ã‚’æ˜ç¤º</li>
      <li><code>HEADER TRUE</code> : CSV ã®1è¡Œç›®ã‚’ã‚«ãƒ©ãƒ åã¨ã—ã¦ç„¡è¦–</li>
      <li><code>NULL 'NULL'</code> : CSV å†…ã§ã€ŒNULLã€ã¨ã„ã†æ–‡å­—åˆ—ã‚’ NULL å€¤ã¨ã—ã¦æ‰±ã†</li>
      <li><code>ENCODING 'UTF8'</code> : æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ UTF-8 ã¨ã—ã¦èª­ã¿è¾¼ã‚€</li>
      </ul>
      <p>ãã®ä»–ã€<code>WITH</code> å¥ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®<a href="https://www.postgresql.org/docs/current/sql-copy.html?utm_source=chatgpt.com">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
      <p><strong>(ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹)</strong></p>
      <blockquote>
      <p>PostgreSQL ã«ãŠã„ã¦ã€COPY â€¦ WITH æ§‹æ–‡ã§ CSVãƒ•ã‚¡ã‚¤ãƒ«
      ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã¿ãŸã„ã§ã™ã€‚ã“ã®ã¨ãã€CSV
      ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€æ”¹è¡Œã‚„ã‚«ãƒ³ãƒã‚’å«ã‚€æ–‡å­—åˆ—ãƒ‡ãƒ¼ã‚¿ã‚‚å«ã‚ãŸã„ã§ã™ã€‚ã©ã®ã‚ˆã†ã« CSV
      ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ã¾ãŸã€<code>WITH</code>
      å¥ã«ã¯ã©ã®ã‚ˆã†ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚Œã°ã‚ˆã„ã§ã™ã‹ã€‚</p>
      </blockquote>
      <blockquote>
      <p>PostgreSQL ã§ã¯ã€COPY â€¦ WITH æ§‹æ–‡ã§
      CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã¿ã§ãã¾ã™ã€‚MySQL
      ã§ã‚‚åŒã˜æ§‹æ–‡ã§ãƒ‡ãƒ¼ã‚¿ã®å–ã‚Šè¾¼ã¿ãŒã§ãã¾ã™ã‹ã€‚</p>
      </blockquote>
      <h1 data-number="5" id="deleteæ–‡-åŸºç¤ç·¨"><span class="header-section-number">5</span> DELETEæ–‡
      (åŸºç¤ç·¨)</h1>
      <p>ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ã€Œå‰Šé™¤ã€ã—ãŸã¨ã <code>DELETE</code> æ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚å®Ÿéš›ã«ã€æ¬¡ã® SQL
      ã‚’å®Ÿè¡Œã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
      <div class="sourceCode" id="cb12" data-caption="ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç„¡æ¡ä»¶ã§å‰Šé™¤"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb12-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb12-1"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb12-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb12-2"></a></span>
<span id="cb12-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb12-3"></a><span class="co">-- ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç„¡æ¡ä»¶å‰Šé™¤</span></span>
<span id="cb12-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb12-4"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> s_characters;</span>
<span id="cb12-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb12-5"></a></span>
<span id="cb12-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb12-6"></a><span class="co">-- ç¢ºèª</span></span>
<span id="cb12-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb12-7"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> s_characters;</span>
<span id="cb12-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb12-8"></a></span>
<span id="cb12-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb12-9"></a><span class="kw">ROLLBACK</span>;</span></code></pre></div>
      <p>ã™ã¹ã¦ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå‰Šé™¤ã•ã‚ŒãŸã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p>
      <p>ä¸€æ–¹ã§ã€ã€Œ<strong>ç‰¹å®šã®æ¡ä»¶ã‚’æº€ãŸã™ãƒ¬ã‚³ãƒ¼ãƒ‰ã ã‘</strong>ã€ã‚’å‰Šé™¤ã—ãŸã„ã‚ˆã†ãªå ´åˆã¯ <span class="masked"><code>WHERE</code>å¥</span>
      ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€<strong>last_login_at</strong> ãŒã€2025æœˆ7æœˆ31æ—¥ä»¥å‰ (<code>NULL</code>
      ã‚’å«ã‚€) ã®ãƒ¬ã‚³ãƒ¼ãƒ‰<strong>ã ã‘</strong>ã‚’å‰Šé™¤ã—ãŸã„å ´åˆã€æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb13" data-caption="WHEREå¥ã‚’æŒ‡å®šã—ã¦æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã ã‘ã‚’å‰Šé™¤"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb13-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-1"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb13-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-2"></a></span>
<span id="cb13-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-3"></a><span class="kw">DELETE</span> <span class="kw">FROM</span> s_characters</span>
<span id="cb13-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-4"></a><span class="kw">WHERE</span></span>
<span id="cb13-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-5"></a>  last_login_at <span class="kw">IS</span> <span class="kw">NULL</span> <span class="kw">OR</span></span>
<span id="cb13-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-6"></a>  last_login_at <span class="op">&lt;=</span> <span class="st">'2025-07-31'</span>;</span>
<span id="cb13-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-7"></a></span>
<span id="cb13-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-8"></a><span class="co">-- ç¢ºèª</span></span>
<span id="cb13-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-9"></a><span class="kw">SELECT</span></span>
<span id="cb13-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-10"></a>  <span class="kw">id</span>,</span>
<span id="cb13-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-11"></a>  name,</span>
<span id="cb13-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-12"></a>  last_login_at</span>
<span id="cb13-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-13"></a><span class="kw">FROM</span></span>
<span id="cb13-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-14"></a>  s_characters</span>
<span id="cb13-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-15"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb13-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-16"></a>  last_login_at;</span>
<span id="cb13-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-17"></a></span>
<span id="cb13-18"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb13-18"></a><span class="kw">ROLLBACK</span>;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã® <strong>ç¬¬02è¡Œç›®</strong> ã® <code>DELETE 5</code>
      ã¨ã„ã†å¿œç­”ã‹ã‚‰ <span class="masked">5ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå‰Šé™¤ã•ã‚ŒãŸã“ã¨</span> ãŒç¢ºèªã§ãã¾ã™ã€‚</p>
      <pre><code>START TRANSACTION
DELETE 5
 id |  name  |    last_login_at
----+--------+---------------------
  8 | Bob    | 2025-08-03 09:11:00
 17 | Wendy  | 2025-08-08 10:56:00
 12 | Dave   | 2025-08-15 16:08:00
 13 | Mallet | 2025-08-27 18:50:00
 19 | Jack   | 2025-09-02 15:43:00
 10 | Oscar  | 2025-09-10 21:00:00
  9 | Walter | 2025-09-14 22:10:00
  6 | Alice  | 2025-09-18 14:22:00
 11 | Ellen  | 2025-09-25 23:55:00
  7 | Trudy  | 2025-09-29 12:37:00
 18 | Carol  | 2025-10-03 11:42:00
 16 | Steve  | 2025-10-06 09:14:00
 14 | Eve    | 2025-10-07 10:17:00
 15 | Trent  | 2025-10-11 17:20:00
(14 è¡Œ)

ROLLBACK</code></pre>
      <h3 data-number="5.0.1" id="sqlãƒ‰ãƒªãƒ«"><span class="header-section-number">5.0.1</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><p><code>ex-01_1.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã€2025å¹´10æœˆ15æ—¥ã‚’èµ·ç®—æ—¥ã¨ã—ã¦60æ—¥ä»¥ä¸Šãƒ­ã‚°ã‚¤ãƒ³ãŒãªã‹ã£ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã™ã‚‹
      SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚</p>
      <ul>
      <li><code>DATE</code> å‹ã®ã€Œ2025å¹´10æœˆ15æ—¥ã€ã¯ã€<code>CAST('2025-10-15' AS DATE)</code> ã¾ãŸã¯
      <code>DATE '2025-10-15'</code> ã§å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</li>
      </ul></li>
      <li><p><code>ex-01_2.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã€<strong>last_login_at</strong> ãŒ <code>NULL</code>
      ã§ã€<strong>created_on</strong> ãŒ2023å¹´12æœˆ31æ—¥ä»¥å‰ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã™ã‚‹ SQL
      ã‚’è¨˜è¿°ã›ã‚ˆã€‚</p></li>
      <li><p><code>ex-01_3.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã€<strong>id</strong>
      ãŒã€Œ3ã€ã€Œ5ã€ã€Œ8ã€ã€Œ9ã€ã€Œ10ã€ã€Œ14ã€ã®6ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã™ã‚‹ SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚</p></li>
      </ul>
      <h1 data-number="6" id="updateæ–‡-åŸºç¤ç·¨"><span class="header-section-number">6</span> UPDATEæ–‡
      (åŸºç¤ç·¨)</h1>
      <p>æ—¢å­˜ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã—ãŸã„ã¨ãã¯ <code>UPDATE</code> æ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<code>DELETE</code>
      æ–‡ã¨ <code>INSERT</code> æ–‡ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã£ã¦ã‚‚ã€å®Ÿè³ªçš„ã«åŒæ§˜ã®å‡¦ç†ã¯å¯èƒ½ã§ã™ãŒã€é€šå¸¸ã¯
      <code>UPDATE</code> æ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
      <h2 data-number="6.1" id="ã™ã¹ã¦ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å€¤ã‚’å›ºå®šå€¤ã§æ›´æ–°"><span class="header-section-number">6.1</span> ã™ã¹ã¦ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å€¤ã‚’å›ºå®šå€¤ã§æ›´æ–°</h2>
      <p>ãŸã¨ãˆã°ã€<strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã®å…¨ã¦ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã€<strong>ãƒãƒ•è§£é™¤</strong> (<strong>buff</strong> ã‚’
      <code>0.0</code> ã«ä¸Šæ›¸ã) ã™ã‚‹ãŸã‚ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã« SQL ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb15" data-caption="ã™ã¹ã¦ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®buffã‚«ãƒ©ãƒ ã‚’0.0ã«è¨­å®šã™ã‚‹"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb15-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-1"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb15-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-2"></a></span>
<span id="cb15-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-3"></a><span class="co">-- æ›´æ–°å‰ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª (çœç•¥)</span></span>
<span id="cb15-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-4"></a></span>
<span id="cb15-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-5"></a><span class="co">-- æ›´æ–°å‡¦ç†</span></span>
<span id="cb15-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-6"></a><span class="kw">UPDATE</span> s_characters</span>
<span id="cb15-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-7"></a><span class="kw">SET</span></span>
<span id="cb15-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-8"></a>  buff <span class="op">=</span> <span class="fl">0.0</span>;</span>
<span id="cb15-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-9"></a></span>
<span id="cb15-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-10"></a><span class="co">-- æ›´æ–°å¾Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª (çœç•¥)</span></span>
<span id="cb15-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-11"></a></span>
<span id="cb15-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb15-12"></a><span class="kw">ROLLBACK</span>;</span></code></pre></div>
      <p>å®Ÿè¡Œã™ã‚‹ã¨ <code>UPDATE 19</code> ã®ã‚ˆã†ãªå¿œç­”ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã“ã®ã¨ãã€ã‚‚ã¨ã‚‚ã¨
      <code>0.0</code> ã§ã‚ã£ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã‚‚ã€å†åº¦ <code>0.0</code>
      ã«ä¸Šæ›¸ãã•ã‚Œã€å‡¦ç†ä»¶æ•°ã«å«ã¾ã‚Œã¦ã„ã‚‹ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>
      <h3 data-number="6.1.1" id="sqlãƒ‰ãƒªãƒ«-1"><span class="header-section-number">6.1.1</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-02_1.sql</code> ğŸ‘‰ ä¸Šè¨˜SQLã®ã€Œ<strong>æ›´æ–°å‰ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª
      (çœç•¥)</strong>ã€ã¨ã€Œ<strong>æ›´æ–°å¾Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª
      (çœç•¥)</strong>ã€ã®ç®‡æ‰€ã«ã€å®Ÿéš›ã«æ›´æ–°å‡¦ç†ãŒç¢ºèªã§ãã‚‹ã‚ˆã†ãª <code>SELECT</code>
      æ–‡ã‚’è¨˜è¿°ã›ã‚ˆã€‚</li>
      </ul>
      <h2 data-number="6.2" id="ç‰¹å®šã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿ã‚’æ›´æ–°"><span class="header-section-number">6.2</span> ç‰¹å®šã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿ã‚’æ›´æ–°</h2>
      <p>ç‰¹å®šã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ‡å®šã—ã¦å€¤ã‚’æ›´æ–°ã™ã‚‹å ´åˆã¯ã€<code>WHERE</code>
      å¥ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãªãŠã€<code>UPDATE</code> æ–‡ã® <code>SET</code> å¥ã§ã¯ã€ã‚«ãƒ³ãƒã§åŒºåˆ‡ã£ã¦ <span class="masked">è¤‡æ•°ã®ã‚«ãƒ©ãƒ ã‚’åŒæ™‚ã«æ›´æ–°ã™ã‚‹ã“ã¨</span> ãŒã§ãã¾ã™ã€‚</p>
      <p>ãŸã¨ãˆã°ã€<strong>id</strong> ãŒã€Œ1ã€ã¨ã€Œ2ã€ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ã«ã¤ã„ã¦ã€<strong>guild</strong>
      ã‚«ãƒ©ãƒ ã‚’ <code>NULL</code> ã«ã—ã¦ã€<strong>job</strong> ã‚«ãƒ©ãƒ ã‚’ <code>Exile</code>
      (äº¡å‘½è€…ãƒ»è¿½æ”¾è€…) ã«å¤‰æ›´ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã« SQL ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb16" data-caption="ç‰¹å®šã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å¯¾è±¡ã¨ã—ãŸæ›´æ–°å‡¦ç†"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb16-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-1"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb16-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-2"></a></span>
<span id="cb16-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-3"></a><span class="co">-- æ›´æ–°å‰ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª (çœç•¥)</span></span>
<span id="cb16-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-4"></a></span>
<span id="cb16-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-5"></a><span class="co">-- æ›´æ–°å‡¦ç†</span></span>
<span id="cb16-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-6"></a><span class="kw">UPDATE</span> s_characters</span>
<span id="cb16-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-7"></a><span class="kw">SET</span></span>
<span id="cb16-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-8"></a>  guild <span class="op">=</span> <span class="kw">NULL</span>,</span>
<span id="cb16-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-9"></a>  job <span class="op">=</span> <span class="st">'Exile'</span></span>
<span id="cb16-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-10"></a><span class="kw">WHERE</span></span>
<span id="cb16-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-11"></a>  <span class="kw">id</span> <span class="kw">IN</span> (<span class="dv">1</span>, <span class="dv">2</span>);</span>
<span id="cb16-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-12"></a></span>
<span id="cb16-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-13"></a><span class="co">-- æ›´æ–°å¾Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª (çœç•¥)</span></span>
<span id="cb16-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-14"></a></span>
<span id="cb16-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb16-15"></a><span class="kw">ROLLBACK</span>;</span></code></pre></div>
      <p>å®Ÿè¡Œã™ã‚‹ã¨ <code>UPDATE 2</code> ã¨ã„ã†å¿œç­”ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
      (2ä»¶ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæ›´æ–°ã•ã‚ŒãŸã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™)ã€‚æ›´æ–°å¾Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã™ã‚‹ <code>SELECT</code>
      æ–‡ã‚’è¨˜è¿°ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
      <pre><code> id |  name   |   job   | guild
----+---------+---------+--------
  1 | Marvin  | Exile   |
  2 | Zach    | Exile   |
 ï½ï½ä»¥ä¸‹ç•¥ï½ï½</code></pre>
      <h3 data-number="6.2.1" id="sqlãƒ‰ãƒªãƒ«-2"><span class="header-section-number">6.2.1</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-02_2.sql</code> ğŸ‘‰ <strong>s_characters</strong> ãƒ†ãƒ¼ãƒ–ãƒ«ã® <strong>job</strong>
      ã‚«ãƒ©ãƒ ã«ã¤ã„ã¦ <code>Wizard</code> ã‚’ <code>Mage</code> ã«æ›´æ–°ã™ã‚‹ SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚</li>
      </ul>
      <h2 data-number="6.3" id="ç¾åœ¨ã®å€¤ã‚’åˆ©ç”¨ã—ãŸæ›´æ–°"><span class="header-section-number">6.3</span> ç¾åœ¨ã®å€¤ã‚’åˆ©ç”¨ã—ãŸæ›´æ–°</h2>
      <p><code>UPDATE</code> æ–‡ã§ã¯ <span class="masked">ç¾åœ¨ã®ã‚«ãƒ©ãƒ å€¤</span>
      ã‚’å‚ç…§ã—ãŸæ›´æ–°ã‚‚å¯èƒ½ã§ã™ã€‚ãŸã¨ãˆã°ã€<strong>level</strong> ã‚’ <code>ç¾åœ¨å€¤+2</code>
      ã«ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã« SQL ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</p>
      <ul>
      <li>å®Ÿéš›ã«å®Ÿè¡Œã™ã‚‹ã¨ãã¯ <code>START TRANSACTION</code> ï½ <code>ROLLBACK</code>
      ã®å†…éƒ¨ã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</li>
      </ul>
      <div class="sourceCode" id="cb18" data-caption="levelã‚’2ã ã‘å¢—åŠ ã•ã›ã‚‹æ›´æ–°"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb18-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb18-1"></a><span class="kw">UPDATE</span> s_characters</span>
<span id="cb18-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb18-2"></a><span class="kw">SET</span></span>
<span id="cb18-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb18-3"></a>  <span class="kw">level</span> <span class="op">=</span> <span class="kw">level</span> <span class="op">+</span> <span class="dv">2</span>;</span></code></pre></div>
      <p>ã¾ãŸã€åŒã˜ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ãªã‹ã®ã€Œ<strong>ä»–ã®ã‚«ãƒ©ãƒ å€¤</strong>ã€ã‚’å‚ç…§ã—ã¦æ›´æ–°ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ãŸã¨ãˆã°ã€<strong>buff</strong>
      ã‚’ <code>SQRT(100-level)*0.05</code> ã«è¨­å®šã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã« SQL ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</p>
      <ul>
      <li><code>SQRT</code> ã¯å¹³æ–¹æ ¹ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°ã§ã™ã€‚</li>
      </ul>
      <div class="sourceCode" id="cb19" data-caption="åŒã˜ãƒ¬ã‚³ãƒ¼ãƒ‰å†…ã®ä»–ã®ã‚«ãƒ©ãƒ å€¤ã‚’å‚ç…§ã—ã¦æ›´æ–°"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb19-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb19-1"></a><span class="kw">UPDATE</span> s_characters</span>
<span id="cb19-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb19-2"></a><span class="kw">SET</span></span>
<span id="cb19-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb19-3"></a>  buff <span class="op">=</span> <span class="fu">SQRT</span>(<span class="dv">100</span> <span class="op">-</span> <span class="kw">level</span>)<span class="op">*</span><span class="fl">0.05</span>;</span></code></pre></div>
      <h3 data-number="6.3.1" id="sqlãƒ‰ãƒªãƒ«-3"><span class="header-section-number">6.3.1</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><p><code>ex-02_3.sql</code> ğŸ‘‰
      ã‚½ãƒ­ãƒ—ãƒ¬ã‚¤å‰è¡›è·å¿œæ´ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ğŸ‰ã¨ã—ã¦ã€<strong>guild</strong> ãŒ <code>NULL</code>
      ã§ã€<strong>job</strong> ãŒ Fighterã€Monkã€Samuraiã€Ninja ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ã® <strong>buff</strong>
      ã‚’ <code>ç¾åœ¨å€¤+0.25</code> (25%Up) ã«æ›´æ–°ã™ã‚‹ã‚ˆã†ãª SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚ã¾ãŸã€æ›´æ–°ã®å‰å¾Œã®
      <strong>buff</strong> ã‚«ãƒ©ãƒ ãªã©ã‚’ç¢ºèªã™ã‚‹ SQL ã‚‚è¨˜è¿°ã™ã‚‹ã“ã¨ã€‚</p></li>
      <li><p><code>ex-02_4.sql</code> ğŸ‘‰
      ãŠã‹ãˆã‚Šãªã•ã„ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ğŸ‰ã¨ã—ã¦ã€2025å¹´10æœˆ15æ—¥ã‚’åŸºæº–æ—¥ã¨ã—ã€æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥ã‹ã‚‰ã®çµŒéæ—¥æ•°ã«å¿œã˜ã¦
      <strong>buff</strong> ã®å€¤ã‚’æ›´æ–° (ä¸Šæ›¸ã) ã™ã‚‹ã‚ˆã†ãª SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚</p>
      <ul>
      <li>æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥ã‹ã‚‰ <strong>60æ—¥ä»¥ä¸Š</strong> çµŒéã—ã¦ã„ã‚Œã° <strong>buff</strong> ã‚’
      <code>0.40</code></li>
      <li>æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥ã‹ã‚‰ <strong>40æ—¥ä»¥ä¸Š</strong> çµŒéã—ã¦ã„ã‚Œã° <strong>buff</strong> ã‚’
      <code>0.30</code></li>
      <li>æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥ã‹ã‚‰ <strong>20æ—¥ä»¥ä¸Š</strong> çµŒéã—ã¦ã„ã‚Œã° <strong>buff</strong> ã‚’
      <code>0.20</code></li>
      <li>æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥ã‹ã‚‰ <strong>10æ—¥ä»¥ä¸Š</strong> çµŒéã—ã¦ã„ã‚Œã° <strong>buff</strong> ã‚’
      <code>0.10</code></li>
      <li>ãã‚Œä»¥å¤–ã¯ <strong>buff</strong> ã‚’ <code>0.00</code> ã«è¨­å®š</li>
      </ul></li>
      </ul>
      <h2 data-number="6.4" id="caseå¼ã«ã‚ˆã‚‹åŒæ™‚ç½®æ›å‡¦ç†"><span class="header-section-number">6.4</span> CASEå¼ã«ã‚ˆã‚‹åŒæ™‚ç½®æ›å‡¦ç†</h2>
      <p><strong>s_characters</strong> ãƒ†ãƒ¼ãƒ–ãƒ«ã® <strong>job</strong>
      ã‚«ãƒ©ãƒ ã«ã¤ã„ã¦ã€(ãƒãƒ­ã‚¦ã‚£ãƒ³ä»®è£…ã‚¤ãƒ™ãƒ³ãƒˆğŸƒã¨ã—ã¦) Priest ãªã‚‰ Wizard ã«æ›´æ–°ã—ã€Wizard ãªã‚‰
      Priest ã«æ›´æ–°ã™ã‚‹ã‚ˆã†ãªå‡¦ç† (ã¤ã¾ã‚Šã€<span class="masked">Priest â†”ï¸ Wizard
      ã®å…¥ã‚Œæ›¿ãˆå‡¦ç†</span>) ã‚’è€ƒãˆã¾ã™ã€‚</p>
      <p>ã“ã®å‡¦ç†ã‚’æ¬¡ã®ã‚ˆã†ã«<strong>2å›ã«åˆ†ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨</strong>ã€æœŸå¾…ã™ã‚‹çµæœã‚’ãˆã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚</p>
      <div class="sourceCode" id="cb20" data-caption="2å›ã«åˆ†ã‘ã¦æ›´æ–°å‡¦ç†ã‚’å®Ÿè¡Œ"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb20-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-1"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb20-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-2"></a></span>
<span id="cb20-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-3"></a><span class="co">-- æ›´æ–°å‰ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª</span></span>
<span id="cb20-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-4"></a><span class="kw">SELECT</span></span>
<span id="cb20-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-5"></a>  <span class="kw">id</span>,</span>
<span id="cb20-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-6"></a>  name,</span>
<span id="cb20-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-7"></a>  job</span>
<span id="cb20-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-8"></a><span class="kw">FROM</span></span>
<span id="cb20-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-9"></a>  s_characters</span>
<span id="cb20-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-10"></a><span class="kw">WHERE</span></span>
<span id="cb20-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-11"></a>  job <span class="kw">IN</span> (<span class="st">'Wizard'</span>, <span class="st">'Priest'</span>)</span>
<span id="cb20-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-12"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb20-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-13"></a>  <span class="kw">id</span>;</span>
<span id="cb20-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-14"></a></span>
<span id="cb20-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-15"></a><span class="co">-- æ›´æ–°å‡¦ç† ğŸ‘‰ Priest ãªã‚‰ã° Wizard ã«å¤‰æ›´</span></span>
<span id="cb20-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-16"></a><span class="kw">UPDATE</span> s_characters</span>
<span id="cb20-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-17"></a><span class="kw">SET</span></span>
<span id="cb20-18"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-18"></a>  job <span class="op">=</span> <span class="st">'Wizard'</span></span>
<span id="cb20-19"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-19"></a><span class="kw">WHERE</span></span>
<span id="cb20-20"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-20"></a>  job <span class="op">=</span> <span class="st">'Priest'</span>;</span>
<span id="cb20-21"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-21"></a></span>
<span id="cb20-22"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-22"></a><span class="co">-- æ›´æ–°å‡¦ç† ğŸ‘‰ Wizard ãªã‚‰ã° Priest ã«å¤‰æ›´</span></span>
<span id="cb20-23"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-23"></a><span class="kw">UPDATE</span> s_characters</span>
<span id="cb20-24"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-24"></a><span class="kw">SET</span></span>
<span id="cb20-25"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-25"></a>  job <span class="op">=</span> <span class="st">'Priest'</span></span>
<span id="cb20-26"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-26"></a><span class="kw">WHERE</span></span>
<span id="cb20-27"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-27"></a>  job <span class="op">=</span> <span class="st">'Wizard'</span>;</span>
<span id="cb20-28"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-28"></a></span>
<span id="cb20-29"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-29"></a><span class="co">-- æ›´æ–°å¾Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª</span></span>
<span id="cb20-30"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-30"></a><span class="kw">SELECT</span></span>
<span id="cb20-31"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-31"></a>  <span class="kw">id</span>,</span>
<span id="cb20-32"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-32"></a>  name,</span>
<span id="cb20-33"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-33"></a>  job</span>
<span id="cb20-34"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-34"></a><span class="kw">FROM</span></span>
<span id="cb20-35"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-35"></a>  s_characters</span>
<span id="cb20-36"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-36"></a><span class="kw">WHERE</span></span>
<span id="cb20-37"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-37"></a>  job <span class="kw">IN</span> (<span class="st">'Wizard'</span>, <span class="st">'Priest'</span>)</span>
<span id="cb20-38"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-38"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb20-39"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-39"></a>  <span class="kw">id</span>;</span>
<span id="cb20-40"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-40"></a></span>
<span id="cb20-41"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb20-41"></a><span class="kw">ROLLBACK</span>;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚æœŸå¾…ã—ãŸã‚¸ãƒ§ãƒ–ã®å…¥ã‚Œæ›¿ãˆã¨ã¯ãªã‚‰ãšã€<span class="masked">å…¨å“¡ãŒ Priest</span> ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚</p>
      <pre><code>START TRANSACTION
 id |  name   |  job   
----+---------+--------
  1 | Marvin  | Priest
  3 | Charlie | Wizard
  6 | Alice   | Priest
 11 | Ellen   | Wizard
 13 | Mallet  | Wizard
 15 | Trent   | Priest
 18 | Carol   | Priest
 19 | Jack    | Wizard
(8 è¡Œ)

UPDATE 4
UPDATE 8
 id |  name   |  job
----+---------+--------
  1 | Marvin  | Priest
  3 | Charlie | Priest
  6 | Alice   | Priest
 11 | Ellen   | Priest
 13 | Mallet  | Priest
 15 | Trent   | Priest
 18 | Carol   | Priest
 19 | Jack    | Priest
(8 è¡Œ)

ROLLBACK</code></pre>
      <p>ã“ã®ã‚ˆã†ãªå ´åˆã€ã„ã£ãŸã‚“åˆ¥ã®å€¤ã«é€€é¿ã—ã¦ã‹ã‚‰å…¥ã‚Œæ›¿ãˆã‚‹æ–¹æ³•ã§ã‚‚å¯¾å¿œã§ãã¾ã™ãŒã€æ¬¡ã®ã‚ˆã†ã«
      <strong>CASEå¼</strong> ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šç°¡æ½”ã« SQL ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb22" data-caption="CASEå¼ã«ã‚ˆã‚‹åŒæ™‚ç½®æ›å‡¦ç†"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb22-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-1"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb22-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-2"></a></span>
<span id="cb22-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-3"></a><span class="co">-- æ›´æ–°å‰ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª (çœç•¥)</span></span>
<span id="cb22-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-4"></a></span>
<span id="cb22-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-5"></a><span class="co">-- æ›´æ–°å‡¦ç† ğŸ‘‰ Priest ã¨ Wizard ã‚’å…¥ã‚Œæ›¿ãˆ</span></span>
<span id="cb22-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-6"></a><span class="kw">UPDATE</span> s_characters</span>
<span id="cb22-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-7"></a><span class="kw">SET</span></span>
<span id="cb22-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-8"></a>  job <span class="op">=</span> <span class="cf">CASE</span></span>
<span id="cb22-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-9"></a>    <span class="cf">WHEN</span> job <span class="op">=</span> <span class="st">'Priest'</span> <span class="cf">THEN</span> <span class="st">'Wizard'</span></span>
<span id="cb22-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-10"></a>    <span class="cf">ELSE</span> <span class="st">'Priest'</span></span>
<span id="cb22-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-11"></a>  <span class="cf">END</span></span>
<span id="cb22-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-12"></a><span class="kw">WHERE</span></span>
<span id="cb22-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-13"></a>  job <span class="kw">IN</span> (<span class="st">'Wizard'</span>, <span class="st">'Priest'</span>);</span>
<span id="cb22-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-14"></a></span>
<span id="cb22-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-15"></a><span class="co">-- æ›´æ–°å¾Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª (çœç•¥)</span></span>
<span id="cb22-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-16"></a></span>
<span id="cb22-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb22-17"></a><span class="kw">ROLLBACK</span>;</span></code></pre></div>
      <p>ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ„å›³ã—ãŸã‚¸ãƒ§ãƒ–ã®å…¥ã‚Œæ›¿ãˆãŒã§ãã¾ã™ã€‚</p>
      <pre><code> id |  name   |  job
----+---------+--------
  1 | Marvin  | Wizard
  3 | Charlie | Priest
  6 | Alice   | Wizard
 11 | Ellen   | Priest
 13 | Mallet  | Priest
 15 | Trent   | Wizard
 18 | Carol   | Wizard
 19 | Jack    | Priest</code></pre>
      <h3 data-number="6.4.1" id="sqlãƒ‰ãƒªãƒ«-4"><span class="header-section-number">6.4.1</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-02_5.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¤ã„ã¦ã€å‰è¡›è·ã®ã‚¸ãƒ§ãƒ–ã‚’æ¬¡ã®ã‚ˆã†ã«å…¥ã‚Œæ›¿ãˆã‚‹ãŸã‚ã® SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚
      <ul>
      <li>Fighter ã‚’ Monk ã«å¤‰æ›´</li>
      <li>Monk ã‚’ Samurai ã«å¤‰æ›´</li>
      <li>Samurai ã‚’ Ninja ã«å¤‰æ›´</li>
      <li>Ninja ã‚’ Fighter ã«å¤‰æ›´</li>
      </ul></li>
      </ul>
      <h2 data-number="6.5" id="è£œè¶³-returningå¥"><span class="header-section-number">6.5</span>
      è£œè¶³: RETURNINGå¥</h2>
      <p>PostgreSQL ã§ã¯ã€<code>UPDATE</code> æ–‡ã‚„ <code>DELETE</code> æ–‡ã‚’å®Ÿè¡Œã—ãŸéš›ã€å¤‰æ›´å¾Œ
      (ã¾ãŸã¯å‰Šé™¤ã—ãŸ) ãƒ¬ã‚³ãƒ¼ãƒ‰ã®å†…å®¹ã‚’å³åº§ã«å–å¾—ã§ãã‚‹ <code>RETURNING</code>
      å¥ã¨ã„ã†æ§‹æ–‡ãŒã‚ã‚Šã¾ã™ã€‚é€šå¸¸ã® <code>UPDATE</code> æ–‡ã¯ã€<code>UPDATE 2</code>
      ã®ã‚ˆã†ã«<strong>ä»¶æ•°ã ã‘</strong>ã‚’è¿”ã—ã¾ã™ãŒã€<code>RETURNING</code> ã‚’ä½¿ã†ã¨ <span class="masked">å¤‰æ›´å¾Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’å—ã‘å–ã‚Šã€ä»»æ„ã®ã‚«ãƒ©ãƒ ã‚’å‡ºåŠ›ã™ã‚‹ã“ã¨</span> ãŒã§ãã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb24" data-caption="RETURNINGå¥ã®åˆ©ç”¨"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb24-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-1"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb24-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-2"></a></span>
<span id="cb24-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-3"></a><span class="kw">UPDATE</span> s_characters</span>
<span id="cb24-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-4"></a><span class="kw">SET</span></span>
<span id="cb24-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-5"></a>  buff <span class="op">=</span> <span class="fl">0.3</span></span>
<span id="cb24-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-6"></a><span class="kw">WHERE</span></span>
<span id="cb24-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-7"></a>  <span class="kw">level</span> <span class="op">&lt;</span> <span class="dv">40</span></span>
<span id="cb24-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-8"></a><span class="kw">RETURNING</span> <span class="co">-- â—€ ã“ã“ã«æ³¨ç›®</span></span>
<span id="cb24-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-9"></a>  <span class="kw">id</span>,</span>
<span id="cb24-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-10"></a>  name,</span>
<span id="cb24-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-11"></a>  <span class="kw">level</span>,</span>
<span id="cb24-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-12"></a>  buff;</span>
<span id="cb24-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-13"></a></span>
<span id="cb24-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb24-14"></a><span class="kw">ROLLBACK</span>;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>START TRANSACTION
 id |  name  | level | buff
----+--------+-------+------
  1 | Marvin |    35 | 0.30
  4 | Tom    |     1 | 0.30
  5 | Ivan   |    39 | 0.30
  8 | Bob    |    33 | 0.30
 18 | Carol  |    28 | 0.30
(5 è¡Œ)

UPDATE 5
ROLLBACK</code></pre>
      <h1 data-number="7" id="é›†ç´„é–¢æ•°-aggregate-function"><span class="header-section-number">7</span> é›†ç´„é–¢æ•° (Aggregate Function)</h1>
      <p>SQL
      ã«ã¯ã€<code>COUNT</code>ã€<code>SUM</code>ã€<code>MIN</code>ã€<code>MAX</code>ã€<code>AVG</code>
      ãªã©ã®
      <strong>é›†ç´„å‡¦ç†</strong>ï¼ˆ<strong>é›†è¨ˆå‡¦ç†</strong>ï¼‰ã‚’å®Ÿè¡Œã™ã‚‹é–¢æ•°ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ä¸€èˆ¬ã«
      <strong>é›†ç´„é–¢æ•°</strong> (<strong>Aggregate Function</strong>ã€é›†è¨ˆé–¢æ•°ã¨ã‚‚å‘¼ã°ã‚Œã‚‹)
      ã¨å‘¼ã°ã‚Œã€åŸºæœ¬çš„ã«ã¯ <code>SELECT</code> å¥ãŠã‚ˆã³ã€å¾Œã§è§£èª¬ã™ã‚‹ <code>HAVING</code>
      å¥ã®ãªã‹ã ã‘ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <h2 data-number="7.1" id="counté–¢æ•°"><span class="header-section-number">7.1</span>
      COUNTé–¢æ•°</h2>
      <p><code>COUNT</code> é–¢æ•°ã¯ã€å¼•æ•°ã¨ã—ã¦æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ã®ã†ã¡ã€<code>NULL</code>
      <strong>ã§ã¯ãªã„ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°</strong>ã‚’æ±‚ã‚ã‚‹é–¢æ•°ã¨ãªã‚Šã¾ã™ã€‚ãŸã ã—ã€å¼•æ•°ã«ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯
      <code>*</code> ã‚’æŒ‡å®šã—ãŸå ´åˆã¯ã€ãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä½“ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ä»¶æ•°ã‚’å–å¾—ã—ã¾ã™
      (ã“ã®ã¨ãã€ã™ã¹ã¦ã®ã‚«ãƒ©ãƒ ãŒ <code>NULL</code>
      ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒã‚ã£ã¦ã‚‚ã€ãã‚Œã‚’ã€Œ1ã€ã¨ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™)ã€‚</p>
      <p>æ¬¡ã® SQL ã®å®Ÿè¡Œçµæœã‚’äºˆæƒ³ã—ã€ãã®å¾Œã€å®Ÿéš›ã«å®Ÿè¡Œã—ã¦çµæœã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <div class="sourceCode" id="cb26" data-caption="COUNTé–¢æ•°ã®åˆ©ç”¨ä¾‹"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb26-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb26-1"></a><span class="kw">SELECT</span></span>
<span id="cb26-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb26-2"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num_record"</span>,</span>
<span id="cb26-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb26-3"></a>  <span class="fu">COUNT</span>(name) <span class="kw">AS</span> <span class="ot">"num_name"</span>, </span>
<span id="cb26-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb26-4"></a>  <span class="fu">COUNT</span>(guild) <span class="kw">AS</span> <span class="ot">"num_guild"</span>,</span>
<span id="cb26-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb26-5"></a>  <span class="fu">COUNT</span>(last_login_at) <span class="kw">AS</span> <span class="ot">"num_last_login_at"</span></span>
<span id="cb26-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb26-6"></a><span class="kw">FROM</span></span>
<span id="cb26-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb26-7"></a>  s_characters;</span></code></pre></div>
      <p>å®Ÿéš›ã®å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> num_record | num_name | num_guild | num_last_login_at 
------------+----------+-----------+-------------------      
         19 |       19 |        14 |                18    </code></pre>
      <p><strong>s_characters</strong> ã«ã¯ 19ä»¶ ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå­˜åœ¨ã™ã‚‹ã®ã§ã€<code>COUNT(*)</code>
      ã¯ã€Œ19ã€ã¨ãªã‚Šã¾ã™ã€‚ã¾ãŸã€<strong>name</strong> ã‚«ãƒ©ãƒ ã¯ <code>NULL</code> ãŒè¨±å¯ã•ã‚Œãªã„ã®ã§
      (ï¼<code>NULL</code> ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å«ã¾ãªã„ã®ã§)ã€<code>COUNT(name)</code> ã¯
      <code>COUNT(*)</code> ã¨åŒã˜ãã€Œ19ã€ã¨ãªã‚Šã¾ã™ã€‚</p>
      <p>ä¸€æ–¹ã§ã€<strong>guild</strong> ã‚«ãƒ©ãƒ ã¯ <code>NULL</code>
      ã‚’è¨±å¯ã—ã¦ãŠã‚Šã€5åãŒã‚®ãƒ«ãƒ‰ç„¡æ‰€å±ã®ãŸã‚ <code>COUNT(guild)</code>
      ã¯ã€Œ14ã€ã¨ãªã‚Šã¾ã™ã€‚ã¾ãŸã€<strong>last_login_at</strong> ã«ã¯ã€1ä»¶ã® <code>NULL</code>
      ã‚’å«ã‚€ã®ã§ <code>COUNT(last_login_at)</code> ã¯ã€Œ18ã€ã¨ãªã‚Šã¾ã™ã€‚</p>
      <h3 data-number="7.1.1" id="é‡è¤‡ã‚’ç„¡è¦–ã™ã‚‹"><span class="header-section-number">7.1.1</span>
      é‡è¤‡ã‚’ç„¡è¦–ã™ã‚‹</h3>
      <p><code>COUNT</code> é–¢æ•°ã§ã¯ã€å¼•æ•°ã«æŒ‡å®šã™ã‚‹ã‚«ãƒ©ãƒ åã®å‰ã« <code>DISTINCT</code>
      ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<code>DISTINCT</code> ã¯ã€<a href="https://takeshiwada1980.github.io/DB-2025/lecture03.html#%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E9%87%8D%E8%A4%87%E3%82%92%E7%9C%81%E3%81%8F">ç¬¬03å›è¬›ç¾©</a>ã§å­¦ã‚“ã ã‚ˆã†ã« <span class="masked">é‡è¤‡ã‚’çœã</span> ãŸã‚ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ã‚ã‚Šã€<code>COUNT</code>
      é–¢æ•°ã®ãªã‹ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€<strong>é‡è¤‡ã‚’é™¤ã„ãŸå€¤ã®ä»¶æ•°</strong> ã‚’æ•°ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <p>æ¬¡ã® SQL ã®å®Ÿè¡Œçµæœã‚’äºˆæƒ³ã—ã€ãã®å¾Œã€å®Ÿéš›ã«å®Ÿè¡Œã—ã¦çµæœã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <div class="sourceCode" id="cb28" data-caption="COUNTé–¢æ•°ã®åˆ©ç”¨ä¾‹(DISTINCTä»˜ã)"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb28-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb28-1"></a><span class="kw">SELECT</span></span>
<span id="cb28-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb28-2"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num_record"</span>,</span>
<span id="cb28-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb28-3"></a>  <span class="fu">COUNT</span>(<span class="kw">DISTINCT</span> job) <span class="kw">AS</span> <span class="ot">"num_job_distinct"</span>,</span>
<span id="cb28-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb28-4"></a>  <span class="fu">COUNT</span>(<span class="kw">DISTINCT</span> guild) <span class="kw">AS</span> <span class="ot">"num_guild_distinct"</span></span>
<span id="cb28-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb28-5"></a><span class="kw">FROM</span></span>
<span id="cb28-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb28-6"></a>  s_characters;</span></code></pre></div>
      <p>å®Ÿéš›ã®å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> num_record | num_job_distinct | num_guild_distinct 
------------+------------------+--------------------
         19 |                6 |                  3</code></pre>
      <p>ã„ã¾ <strong>job</strong>
      ã‚«ãƒ©ãƒ ã«ã¯ã€ŒFighterã€ã€ŒMonkã€ã€ŒSamuraiã€ã€ŒNinjaã€ã€ŒWizardã€ã€ŒPriestã€ã®6ç¨®é¡ãŒå­˜åœ¨ã™ã‚‹ãŸã‚
      <code>COUNT(DISTINCT job)</code> ã¯ã€Œ<strong>6</strong>ã€ã¨ãªã‚Šã¾ã™ã€‚</p>
      <p>ã¾ãŸã€<strong>guild</strong>
      ã‚«ãƒ©ãƒ ã«ã¯ã€ŒYamatoã€ã€ŒD.D.Dã€ã€Œhamelnã€ã€ŒNULLã€ã®4ç¨®é¡ãŒå­˜åœ¨ã—ã¾ã™ãŒ <span class="masked"><code>NULL</code> ã¯ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œãªã„</span> ãŸã‚
      <code>COUNT(DISTINCT guild)</code> ã¯ã€Œ<strong>3</strong>ã€ã¨ãªã‚Šã¾ã™ã€‚</p>
      <ul>
      <li><i class="fa-brands fa-github"></i><a href="https://github.com/TakeshiWada1980/DB-2025-PostgreSQL/blob/main/from-teacher/03/init-s_characters.sql">from-teacher/03/init-s_users.sql</a>
      å‚è€ƒ</li>
      </ul>
      <h3 data-number="7.1.2" id="sqlãƒ‰ãƒªãƒ«-5"><span class="header-section-number">7.1.2</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-03_1.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰æ¬¡ã®ã‚ˆã†ãªçµæœã‚»ãƒƒãƒˆã‚’å¾—ã‚‹ SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚</li>
      </ul>
      <pre><code> ã‚¸ãƒ§ãƒ–ç¨® 
----------
 6ç¨®é¡</code></pre>
      <ul>
      <li><code>ex-03_2.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰æ¬¡ã®ã‚ˆã†ãªçµæœã‚»ãƒƒãƒˆã‚’å¾—ã‚‹ SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚</li>
      </ul>
      <pre><code> ã‚®ãƒ«ãƒ‰æ‰€å± | ç„¡æ‰€å± 
------------+--------
 14äºº       | 5äºº</code></pre>
      <h2 data-number="7.2" id="sumé–¢æ•°ã¨avgé–¢æ•°"><span class="header-section-number">7.2</span>
      SUMé–¢æ•°ã¨AVGé–¢æ•°</h2>
      <p><code>SUM</code>
      é–¢æ•°ã¯å¼•æ•°ã¨ã—ã¦æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ã®ã€Œ<strong>åˆè¨ˆ</strong>ã€ã‚’æ±‚ã‚ã‚‹é–¢æ•°ã€<code>AVG</code>
      é–¢æ•°ã¯å¼•æ•°ã¨ã—ã¦æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ã®ã€Œ<strong>å¹³å‡</strong>ã€ã‚’æ±‚ã‚ã‚‹é–¢æ•°ã¨ãªã‚Šã¾ã™ã€‚ã„ãšã‚Œã‚‚ã€<span class="masked">æ•°å€¤å‹ã®ã‚«ãƒ©ãƒ ã ã‘</span> ã‚’å¼•æ•°ã«ã¨ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <ul>
      <li>ã„ãšã‚Œã®é–¢æ•°ã‚‚ <code>COUNT</code> é–¢æ•°ã®ã‚ˆã†ã«ã€ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯ <code>*</code>
      ã‚’å¼•æ•°ã«ã¨ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</li>
      <li>ã„ãšã‚Œã®é–¢æ•°ã‚‚ <code>NULL</code> ã¯é™¤å¤–ã•ã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€<strong>num</strong>
      ã¨ã„ã†ã‚«ãƒ©ãƒ ãŒã‚ã£ãŸã¨ã—ã¦ã€ãã®å€¤ãŒ <code>3</code>ã€<code>5</code>ã€<code>NULL</code> ã®ã¨ã
      <code>AVG(num)</code> ã¯ <span class="math inline"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="0" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c35"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2F"></mjx-c></mjx-mo></mjx-texatom><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mn>3</mn><mo>+</mo><mn>5</mn><mo stretchy="false">)</mo><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mn>2</mn></math></mjx-assistive-mml></mjx-container></span> ã§ <code>4</code>
      ã¨ãªã‚Šã¾ã™ã€‚</li>
      </ul>
      <p>æ¬¡ã® SQL ã®å®Ÿè¡Œçµæœã‚’äºˆæƒ³ã—ã€ãã®å¾Œã€å®Ÿéš›ã«å®Ÿè¡Œã—ã¦çµæœã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <div class="sourceCode" id="cb32" data-caption="SUMé–¢æ•°ã¨AVGé–¢æ•°ã®åˆ©ç”¨ä¾‹"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb32-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb32-1"></a><span class="kw">SELECT</span></span>
<span id="cb32-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb32-2"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="kw">level</span>),<span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_level"</span>,</span>
<span id="cb32-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb32-3"></a>  <span class="fu">SUM</span>(<span class="kw">level</span>) <span class="kw">AS</span> <span class="ot">"sum_level"</span></span>
<span id="cb32-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb32-4"></a><span class="kw">FROM</span></span>
<span id="cb32-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb32-5"></a>  s_characters;</span></code></pre></div>
      <p>å®Ÿéš›ã®å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãªãŠã€ä¸Šè¨˜ã®<strong>ç¬¬02è¡Œç›®</strong>ã®
      <code>ROUND</code> ã¯<a href="https://takeshiwada1980.github.io/DB-2025/lecture03.html#%E3%82%AB%E3%83%A9%E3%83%A0%E5%80%A4%E3%81%AB%E6%96%87%E5%AD%97%E5%88%97%E6%BC%94%E7%AE%97%E3%81%A8%E7%AE%97%E8%A1%93%E6%BC%94%E7%AE%97%E3%82%92%E9%81%A9%E7%94%A8%E3%81%99%E3%82%8B">ç¬¬03å›è¬›ç¾©</a>ã§ç´¹ä»‹ã—ãŸã‚ˆã†ã«å››æ¨äº”å…¥ã‚’é©ç”¨ã™ã‚‹é–¢æ•°ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> avg_level | sum_level 
-----------+-----------
      48.8 |       928</code></pre>
      <h3 data-number="7.2.1" id="nullå€¤ã‚’ç‰¹å®šå€¤ã«ç½®ãæ›ãˆã¦åˆè¨ˆã‚„å¹³å‡ã‚’æ±‚ã‚ãŸã„å ´åˆ"><span class="header-section-number">7.2.1</span>
      NULLå€¤ã‚’ç‰¹å®šå€¤ã«ç½®ãæ›ãˆã¦åˆè¨ˆã‚„å¹³å‡ã‚’æ±‚ã‚ãŸã„å ´åˆ</h3>
      <p><code>NULL</code> ã‚’ç‰¹å®šã®æ•°å€¤ã«ç½®ãæ›ãˆã¦ <code>SUM</code> é–¢æ•°ã‚„ <code>AVG</code>
      é–¢æ•°ã‚’é©ç”¨ã—ãŸã„å ´åˆã€<code>COALESCE</code> é–¢æ•°ã‚’çµ„ã¿åˆã‚ã›ã¾ã™ã€‚</p>
      <p>æ¬¡ã® SQL ã¯ã€<strong>age</strong> ã‚«ãƒ©ãƒ ãŒ <code>NULL</code> ã®ã¨ãã€ãã‚Œã‚’ <code>16</code>
      ã«ç½®ãæ›ãˆã¦åˆè¨ˆã¨å¹³å‡ã‚’é©ç”¨ã™ã‚‹ã‚‚ã®ã§ã™ã€‚å®Ÿè¡Œçµæœã‚’äºˆæƒ³ã—ã€ãã®å¾Œã€å®Ÿéš›ã«å®Ÿè¡Œã—ã¦çµæœã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <div class="sourceCode" id="cb34" data-caption="SUMé–¢æ•°ã¨AVGé–¢æ•°ã®åˆ©ç”¨ä¾‹"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb34-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-1"></a><span class="kw">START</span> <span class="kw">TRANSACTION</span>;</span>
<span id="cb34-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-2"></a></span>
<span id="cb34-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-3"></a><span class="kw">INSERT</span> <span class="kw">INTO</span></span>
<span id="cb34-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-4"></a>  s_users (<span class="kw">id</span>, name, age)</span>
<span id="cb34-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-5"></a><span class="kw">VALUES</span></span>
<span id="cb34-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-6"></a>  (<span class="dv">3</span>, <span class="st">'Carol'</span>, <span class="dv">18</span>),</span>
<span id="cb34-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-7"></a>  (<span class="dv">4</span>, <span class="st">'Dave'</span>, <span class="kw">NULL</span>),</span>
<span id="cb34-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-8"></a>  (<span class="dv">5</span>, <span class="st">'Ellen'</span>, <span class="dv">17</span>);</span>
<span id="cb34-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-9"></a></span>
<span id="cb34-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-10"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> s_users;</span>
<span id="cb34-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-11"></a></span>
<span id="cb34-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-12"></a><span class="kw">SELECT</span></span>
<span id="cb34-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-13"></a>  <span class="fu">SUM</span>(age) <span class="kw">AS</span> <span class="ot">"sum"</span>,</span>
<span id="cb34-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-14"></a>  <span class="fu">SUM</span>(<span class="fu">COALESCE</span>(age, <span class="dv">16</span>)) <span class="kw">AS</span> <span class="ot">"sum_with_default"</span>,</span>
<span id="cb34-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-15"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(age), <span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg"</span>,</span>
<span id="cb34-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-16"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="fu">COALESCE</span>(age, <span class="dv">16</span>)), <span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_with_default"</span></span>
<span id="cb34-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-17"></a><span class="kw">FROM</span></span>
<span id="cb34-18"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-18"></a>  s_users;</span>
<span id="cb34-19"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-19"></a></span>
<span id="cb34-20"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb34-20"></a><span class="kw">ROLLBACK</span>;</span></code></pre></div>
      <p>å®Ÿéš›ã®å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>START TRANSACTION
INSERT 0 3
 id | name  | age
----+-------+-----
  1 | Alice |  20
  2 | Bob   |  25
  3 | Carol |  18
  4 | Dave  |
  5 | Ellen  |  17
(5 è¡Œ)

 sum | sum_with_default | avg  | avg_with_default
-----+------------------+------+------------------
  80 |               96 | 20.0 |             19.2
(1 è¡Œ)

ROLLBACK</code></pre>
      <h3 data-number="7.2.2" id="sqlãƒ‰ãƒªãƒ«-6"><span class="header-section-number">7.2.2</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-03_3.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã€æ¬¡ã®ã‚ˆã†ã«ã‚®ãƒ«ãƒ‰ç„¡æ‰€å± (ï¼<strong>guild</strong> ãŒ <code>NULL</code>)
      ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ã«ã¤ã„ã¦ã€ãƒ¬ãƒ™ãƒ«ã®å¹³å‡ã¨åˆè¨ˆã‚’æ±‚ã‚ã‚‹ SQL
      ã‚’è¨˜è¿°ã›ã‚ˆã€‚ãŸã ã—ã€ãƒ¬ãƒ™ãƒ«ã®å¹³å‡ã¯å°æ•°ç¬¬3ä½ã‚’å››æ¨äº”å…¥ã—ã¦ã€å°æ•°ç¬¬2ä½ã¾ã§è¡¨ç¤ºã™ã‚‹ã“ã¨ã€‚
      <ul>
      <li><strong>ãƒ’ãƒ³ãƒˆ</strong> : <span class="masked">ã‚®ãƒ«ãƒ‰ç„¡æ‰€å±ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ã ã‘ã‚’å¯¾è±¡ã«ã™ã‚‹ã«ã¯ <code>WHERE</code>
      å¥ã‚’åˆ©ç”¨ã™ã‚‹</span></li>
      </ul></li>
      </ul>
      <pre><code> ç„¡æ‰€å±å¹³å‡Lv | ç„¡æ‰€å±åˆè¨ˆLv 
--------------+--------------
        39.60 |          198</code></pre>
      <ul>
      <li><code>ex-03_4.sql</code> ğŸ‘‰ <strong>s_characters</strong> ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã€å‰è¡›è·
      (Fighterã€Monkã€Samuraiã€Ninja) ã®äººæ•°ã¨å¹³å‡ãƒ¬ãƒ™ãƒ«ã€å¾Œè¡›è· (Wizardã€Priest)
      ã®äººæ•°ã¨å¹³å‡ãƒ¬ãƒ™ãƒ«ã‚’æ±‚ã‚ã‚‹ SQL ã‚’è¨˜è¿°ã›ã‚ˆ (ç¾æ™‚ç‚¹ã¾ã§ã«å­¦ã‚“ã§ã„ã‚‹ç¯„å›²ã§ã¯ã€2ã¤ã®
      <code>SELECT</code>
      æ–‡ã‚’è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹)ã€‚ãŸã ã—ã€ãƒ¬ãƒ™ãƒ«ã®å¹³å‡ã¯å°æ•°ç¬¬2ä½ã‚’å››æ¨äº”å…¥ã—ã¦ã€å°æ•°ç¬¬1ä½ã¾ã§è¡¨ç¤ºã™ã‚‹ã“ã¨ã€‚</li>
      </ul>
      <pre><code> å‰è¡›è·äººæ•° | å‰è¡›è·å¹³å‡Lv 
------------+--------------
         11 |         49.1

 å¾Œè¡›è·äººæ•° | å¾Œè¡›è·å¹³å‡Lv
------------+--------------
          8 |         48.5</code></pre>
      <h2 data-number="7.3" id="maxé–¢æ•°ã¨miné–¢æ•°"><span class="header-section-number">7.3</span>
      MAXé–¢æ•°ã¨MINé–¢æ•°</h2>
      <p><code>MAX</code> é–¢æ•°ã¨ <code>MIN</code>
      é–¢æ•°ã¯ã€å¼•æ•°ã¨ã—ã¦æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ã®ã€Œ<strong>æœ€å¤§å€¤</strong>ã€ã¨ã€Œ<strong>æœ€å°å€¤</strong>ã€ã‚’æ±‚ã‚ã‚‹é–¢æ•°ã¨ãªã‚Šã¾ã™ã€‚ã„ãšã‚Œã®é–¢æ•°ã‚‚ã€æ•°å€¤å‹ã®ä»–ã€<strong>æ—¥æ™‚å‹</strong>
      (<code>DATE</code>ã‚„<code>TIMESTAMP</code>)ã€<strong>æ–‡å­—åˆ—å‹</strong>ãªã©ã®ã‚«ãƒ©ãƒ ã«é©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <ul>
      <li>ã„ãšã‚Œã®é–¢æ•°ã‚‚ <code>COUNT</code> é–¢æ•°ã®ã‚ˆã†ã«ã€ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯ <code>*</code>
      ã‚’å¼•æ•°ã«ã¨ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</li>
      <li>ã„ãšã‚Œã®é–¢æ•°ã‚‚ <code>NULL</code> ã¯é™¤å¤–ã•ã‚Œã¾ã™ã€‚</li>
      <li>æ—¥æ™‚å‹ã«é©ç”¨ã—ãŸå ´åˆã€<code>MAX</code> ã¯æœ€ã‚‚æœªæ¥ã®å€¤ (é™é †ã«æ•´åˆ—ã—ãŸå…ˆé ­)
      ã€<code>MIN</code> ã¯æœ€ã‚‚éå»ã®å€¤ (æ˜‡é †ã«æ•´åˆ—ã—ãŸå…ˆé ­) ã‚’è¿”ã—ã¾ã™ã€‚</li>
      <li>æ–‡å­—åˆ—ã«é©ç”¨ã—ãŸå ´åˆã€<code>MAX</code> ã¯è¾æ›¸é †ã®æœ€å¾Œ (ï¼æ˜‡é †ã«ä¸¦ã¹ãŸã¨ãã®æœ«å°¾)
      ã®å€¤ã‚’ã€<code>MIN</code> ã¯è¾æ›¸é †ã®æœ€åˆ (ï¼æ˜‡é †ã«ä¸¦ã¹ãŸã¨ãã®å…ˆé ­) ã®å€¤ã‚’è¿”ã—ã¾ã™ã€‚</li>
      </ul>
      <p>æ¬¡ã® SQL ã®å®Ÿè¡Œçµæœã‚’äºˆæƒ³ã—ã€ãã®å¾Œã€å®Ÿéš›ã«å®Ÿè¡Œã—ã¦çµæœã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <div class="sourceCode" id="cb38" data-caption="MAXé–¢æ•°ã¨MINé–¢æ•°ã®åˆ©ç”¨ä¾‹"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb38-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-1"></a><span class="kw">SELECT</span></span>
<span id="cb38-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-2"></a>  <span class="fu">MIN</span>(<span class="kw">level</span>) <span class="kw">AS</span> <span class="ot">"min_lv."</span>,</span>
<span id="cb38-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-3"></a>  <span class="fu">MAX</span>(<span class="kw">level</span>) <span class="kw">AS</span> <span class="ot">"max_lv."</span>,</span>
<span id="cb38-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-4"></a>  <span class="fu">MIN</span>(name) <span class="kw">AS</span> <span class="ot">"min_name"</span>,</span>
<span id="cb38-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-5"></a>  <span class="fu">MAX</span>(name) <span class="kw">AS</span> <span class="ot">"max_name"</span></span>
<span id="cb38-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-6"></a><span class="kw">FROM</span></span>
<span id="cb38-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-7"></a>  s_characters;</span>
<span id="cb38-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-8"></a></span>
<span id="cb38-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-9"></a><span class="kw">SELECT</span></span>
<span id="cb38-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-10"></a>  <span class="fu">MIN</span>(created_on) <span class="kw">AS</span> <span class="ot">"min_created_on"</span>,</span>
<span id="cb38-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-11"></a>  <span class="fu">MAX</span>(created_on) <span class="kw">AS</span> <span class="ot">"max_created_on"</span></span>
<span id="cb38-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-12"></a><span class="kw">FROM</span></span>
<span id="cb38-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb38-13"></a>  s_characters;</span></code></pre></div>
      <p>å®Ÿéš›ã®å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> min_lv | max_lv | min_name | max_name 
--------+--------+----------+----------
      1 |     73 | Alice    | Zach
(1 è¡Œ)

 min_created_on | max_created_on
----------------+----------------
 2020-09-23     | 2024-07-12
(1 è¡Œ)</code></pre>
      <h3 data-number="7.3.1" id="æ–‡å­—æ•°ã®ã‚«ã‚¦ãƒ³ãƒˆ"><span class="header-section-number">7.3.1</span>
      æ–‡å­—æ•°ã®ã‚«ã‚¦ãƒ³ãƒˆ</h3>
      <p>æ–‡å­—åˆ—å‹ã«å¯¾ã—ã¦ã€<strong>æ–‡å­—æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ãŸã„å ´åˆ</strong> ã¯ <code>LENGTH</code>
      é–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚æ¬¡ã® SQL
      ã®å®Ÿè¡Œçµæœã‚’äºˆæƒ³ã—ã€ãã®å¾Œã€å®Ÿéš›ã«å®Ÿè¡Œã—ã¦çµæœã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <div class="sourceCode" id="cb40" data-caption="æœ€å°æ–‡å­—æ•°ã¨æœ€å¤§æ–‡å­—æ•°ã‚’æ±‚ã‚ã‚‹ä¾‹"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb40-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb40-1"></a><span class="kw">SELECT</span></span>
<span id="cb40-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb40-2"></a>  <span class="fu">MIN</span>(<span class="fu">LENGTH</span>(name)) <span class="kw">AS</span> <span class="ot">"min_len_name"</span>,</span>
<span id="cb40-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb40-3"></a>  <span class="fu">MAX</span>(<span class="fu">LENGTH</span>(name)) <span class="kw">AS</span> <span class="ot">"max_len_name"</span></span>
<span id="cb40-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb40-4"></a><span class="kw">FROM</span></span>
<span id="cb40-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb40-5"></a>  s_characters;</span></code></pre></div>
      <p>å®Ÿéš›ã®å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> min_len_name | max_len_name 
--------------+--------------
            3 |            7</code></pre>
      <div class="note type-senior">
      <p><strong>EX: æœ€ã‚‚çŸ­ã„åå‰ã¨æœ€ã‚‚é•·ã„åå‰ã‚’å–å¾—ã™ã‚‹</strong></p>
      <p>ä»Šå¾Œã®è¬›ç¾©ã§å­¦ã¶ã€Œ<strong>ã‚µãƒ–ã‚¯ã‚¨ãƒª</strong>ã€ã¨ã„ã†ã‚‚ã®ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãªã‹ã‹ã‚‰ã€Œæœ€ã‚‚çŸ­ã„åå‰ã€ã‚„ã€Œæœ€ã‚‚é•·ã„åå‰ã€ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb42" data-caption="ã€Œæœ€ã‚‚çŸ­ã„åå‰ã€ã¨ã€Œæœ€ã‚‚é•·ã„åå‰ã€ã‚’å–å¾—ã™ã‚‹"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb42-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-1"></a><span class="kw">SELECT</span></span>
<span id="cb42-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-2"></a>  name <span class="kw">AS</span> <span class="ot">"æœ€ã‚‚çŸ­ã„åå‰"</span></span>
<span id="cb42-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-3"></a><span class="kw">FROM</span></span>
<span id="cb42-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-4"></a>  s_characters</span>
<span id="cb42-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-5"></a><span class="kw">WHERE</span></span>
<span id="cb42-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-6"></a>  <span class="fu">LENGTH</span>(name) <span class="op">=</span> (</span>
<span id="cb42-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-7"></a>    <span class="kw">SELECT</span></span>
<span id="cb42-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-8"></a>      <span class="fu">MIN</span>(<span class="fu">LENGTH</span>(name))</span>
<span id="cb42-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-9"></a>    <span class="kw">FROM</span></span>
<span id="cb42-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-10"></a>      s_characters</span>
<span id="cb42-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-11"></a>  );</span>
<span id="cb42-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-12"></a></span>
<span id="cb42-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-13"></a><span class="kw">SELECT</span></span>
<span id="cb42-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-14"></a>  name <span class="kw">AS</span> <span class="ot">"æœ€ã‚‚é•·ã„åå‰"</span></span>
<span id="cb42-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-15"></a><span class="kw">FROM</span></span>
<span id="cb42-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-16"></a>  s_characters</span>
<span id="cb42-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-17"></a><span class="kw">WHERE</span></span>
<span id="cb42-18"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-18"></a>  <span class="fu">LENGTH</span>(name) <span class="op">=</span> (</span>
<span id="cb42-19"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-19"></a>    <span class="kw">SELECT</span></span>
<span id="cb42-20"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-20"></a>      <span class="fu">MAX</span>(<span class="fu">LENGTH</span>(name))</span>
<span id="cb42-21"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-21"></a>    <span class="kw">FROM</span></span>
<span id="cb42-22"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-22"></a>      s_characters</span>
<span id="cb42-23"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb42-23"></a>  );</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> æœ€ã‚‚çŸ­ã„åå‰
--------------
 Tom
 Bob
 Eve
(3 è¡Œ)

 æœ€ã‚‚é•·ã„åå‰
--------------
 Charlie
(1 è¡Œ)</code></pre>
      </div>
      <h3 data-number="7.3.2" id="sqlãƒ‰ãƒªãƒ«-7"><span class="header-section-number">7.3.2</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-03_5.sql</code> ğŸ‘‰ <strong>s_characters</strong> ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã€æ¬¡ã«ç¤ºã™ã‚ˆã†ã«
      <strong>buff</strong> ã‚«ãƒ©ãƒ ã®ã€Œæœ€å°å€¤ã€ã€Œæœ€å¤§å€¤ã€ã€Œæœ€å¤§å€¤ã¨æœ€å°å€¤ã®å·®ã€ã‚’æ±‚ã‚ã‚‹ SQL
      ã‚’è¨˜è¿°ã›ã‚ˆã€‚</li>
      </ul>
      <pre><code> min_buff | max_buff | max-min 
----------+----------+---------
    -0.20 |     0.10 |    0.30</code></pre>
      <ul>
      <li><p><code>ex-03_6.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãŠã„ã¦ã€æœ€ã‚‚é•·ã„ã‚®ãƒ«ãƒ‰åãŒä½•æ–‡å­—ã‹ã‚’æ±‚ã‚ã‚‹ SQL
      ã‚’è¨˜è¿°ã›ã‚ˆã€‚ãŸã ã—ã€<strong>guild</strong> ã‚«ãƒ©ãƒ ã® <code>NULL</code> å€¤ã¯
      <code>Freelancer</code> ã¨ã„ã†æ–‡å­—åˆ—ã«ç½®ãæ›ãˆã¦è©•ä¾¡ã™ã‚‹ã“ã¨ã€‚</p></li>
      <li><p>ç¾æ™‚ç‚¹ã§ã¯ã€ã‚®ãƒ«ãƒ‰åãŒå°æ–‡å­—ã«å¤‰æ›ã•ã‚Œã¦ã„ã¦ã‚‚å•é¡Œãªã„ã€‚</p></li>
      </ul>
      <h1 data-number="8" id="group-by"><span class="header-section-number">8</span> GROUP BY</h1>
      <p><code>SELECT</code> æ–‡ã« <code>GROUP BY</code> å¥ã‚’ä½¿ã†ã¨
      <strong>æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–å‡¦ç†ã‚’è¡Œã„</strong>ã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã«å¯¾ã—ã¦é›†ç´„é–¢æ•°ã‚’é©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <p>ä¾‹ãˆã°ã€<strong>job</strong> ã”ã¨ã«ã€Œäººæ•°ã€ã€Œæœ€å¤§ãƒ¬ãƒ™ãƒ«ã€ã€Œå¹³å‡ãƒ¬ãƒ™ãƒ«ã€ã‚’æ±‚ã‚ã‚‹ SQL
      ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãªãŠã€<code>GROUP BY</code> å¥ã«æŒ‡å®šã™ã‚‹ã‚«ãƒ©ãƒ ã®ã“ã¨ã‚’ <span class="masked">é›†ç´„ã‚­ãƒ¼</span> ã¨è¨€ã„ã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb45" data-caption="GROUP BYå¥ã®åˆ©ç”¨"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb45-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-1"></a><span class="kw">SELECT</span></span>
<span id="cb45-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-2"></a>  job,</span>
<span id="cb45-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-3"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span>,</span>
<span id="cb45-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-4"></a>  <span class="fu">MAX</span>(<span class="kw">level</span>) <span class="kw">AS</span> <span class="ot">"max_lv"</span>,</span>
<span id="cb45-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-5"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="kw">level</span>),<span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_lv"</span></span>
<span id="cb45-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-6"></a><span class="kw">FROM</span></span>
<span id="cb45-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-7"></a>  s_characters</span>
<span id="cb45-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-8"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb45-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-9"></a>  job <span class="co">-- â—€ job ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–å‡¦ç†</span></span>
<span id="cb45-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-10"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb45-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb45-11"></a>  job;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>   job   | num | max_lv | avg_lv 
---------+-----+--------+--------
 Fighter |   4 |     56 |   37.3
 Monk    |   2 |     39 |   36.0
 Ninja   |   2 |     62 |   54.0
 Priest  |   4 |     50 |   38.8
 Samurai |   3 |     73 |   70.3
 Wizard  |   4 |     64 |   58.3</code></pre>
      <p>ãªãŠã€<code>SELECT</code> æ–‡ã¯ã€<code>SELECT</code> å¥ ğŸ‘‰ <code>FROM</code> å¥ ğŸ‘‰
      <code>WHERE</code> å¥ ğŸ‘‰ <code>GROUP BY</code> å¥ ğŸ‘‰ <code>ORDER BY</code> å¥ ğŸ‘‰
      (<code>LIMIT</code> å¥ / <code>OFFSET</code> å¥)
      ã¨ã„ã†é †ã§è¨˜è¿°ã—ãªã„ã¨<strong>æ§‹æ–‡ã‚¨ãƒ©ãƒ¼</strong>ã«ãªã‚‹ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>
      <h3 data-number="8.0.1" id="é›†ç´„ã‚­ãƒ¼ã«nullãŒå«ã¾ã‚Œã‚‹å ´åˆã®æŒ™å‹•"><span class="header-section-number">8.0.1</span> é›†ç´„ã‚­ãƒ¼ã«NULLãŒå«ã¾ã‚Œã‚‹å ´åˆã®æŒ™å‹•</h3>
      <p>é›†ç´„ã‚­ãƒ¼ (<code>GROUP BY</code> ã§æŒ‡å®šã™ã‚‹ã‚«ãƒ©ãƒ ) ã« <code>NULL</code>
      ãŒå«ã¾ã‚Œã‚‹å ´åˆã€<code>NULL</code>
      ã‚‚ã€Œã²ã¨ã¤ã®ã‚°ãƒ«ãƒ¼ãƒ—ã€ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‚ã€å®Ÿéš›ã«å®Ÿè¡Œçµæœã‚’ã¿ãŸã»ã†ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚</p>
      <p>å€¤ã« <code>NULL</code> ã‚’å«ã‚€ <strong>guild</strong> ã‚«ãƒ©ãƒ ã‚’ã€Œé›†ç´„ã‚­ãƒ¼ã€ã«ä½¿ç”¨ã—ã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb47" data-caption="GROUP BYå¥ã®é›†ç´„ã‚­ãƒ¼ã«NULLãŒå«ã¾ã‚Œã‚‹å ´åˆ"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb47-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-1"></a><span class="kw">SELECT</span></span>
<span id="cb47-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-2"></a>  guild,</span>
<span id="cb47-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-3"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span>,</span>
<span id="cb47-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-4"></a>  <span class="fu">MAX</span>(<span class="kw">level</span>) <span class="kw">AS</span> <span class="ot">"max_lv"</span>,</span>
<span id="cb47-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-5"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="kw">level</span>),<span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_lv"</span></span>
<span id="cb47-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-6"></a><span class="kw">FROM</span></span>
<span id="cb47-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-7"></a>  s_characters</span>
<span id="cb47-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-8"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb47-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-9"></a>  guild <span class="co">-- â—€ guild ã‚’é›†ç´„ã‚­ãƒ¼ã«æŒ‡å®š</span></span>
<span id="cb47-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-10"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb47-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb47-11"></a>  <span class="fu">LOWER</span>(guild); <span class="co">-- â—€ å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã›ãšã«æ•´åˆ—</span></span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> guild  | num | max_lv | avg_lv 
--------+-----+--------+--------
 D.D.D  |   5 |     64 |   55.8
 hameln |   4 |     70 |   52.0
 Yamato |   5 |     68 |   48.6
        |   5 |     73 |   39.6</code></pre>
      <p>æœ€çµ‚è¡Œã« <strong>guild</strong> ãŒ <code>NULL</code> ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿
      (ã‚®ãƒ«ãƒ‰ç„¡æ‰€å±ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿) ã«å¯¾ã™ã‚‹é›†è¨ˆãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã€‚<code>NULL</code>
      ã¯ç©ºæ¬„ã§è¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€ä»»æ„ã®æ–‡å­—åˆ—ã«ç½®ãæ›ãˆãŸã„ã¨ãã¯ <code>COALESCE</code>
      ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
      <p>ä¾‹ãˆã°ã€<code>SELECT</code> å¥ã® <code>guild</code> ã‚’
      <code>COALESCE(guild,'Freelancer') AS "guild"</code>
      ã«æ›¸ãæ›ãˆã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªçµæœã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <pre><code>   guild    | num | max_lv | avg_lv 
------------+-----+--------+--------
 D.D.D      |   5 |     64 |   55.8
 hameln     |   4 |     70 |   52.0
 Yamato     |   5 |     68 |   48.6
 Freelancer |   5 |     73 |   39.6</code></pre>
      <h3 data-number="8.0.2" id="sqlãƒ‰ãƒªãƒ«-8"><span class="header-section-number">8.0.2</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-04_1.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã€æ¬¡ã®ã‚ˆã†ãªçµæœã‚»ãƒƒãƒˆã‚’å¾—ã‚‹ SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚
      <ul>
      <li><strong>guild</strong> ãŒ <code>NULL</code>
      ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚’å…ˆé ­ã«é…ç½®ã—ã¦ã€Œç„¡æ‰€å±ã€ã¨ã„ã†ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã™ã‚‹ã“ã¨ã€‚</li>
      <li><strong>guild</strong> ãŒ <code>Yamato</code> ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚’çµæœã‚»ãƒƒãƒˆã«å«ã‚ãªã„ã“ã¨ã€‚</li>
      </ul></li>
      </ul>
      <pre><code> guild  | num | max_lv | mim_lv | max_buff | min_buff 
--------+-----+--------+--------+----------+----------
 ç„¡æ‰€å± |   5 |     73 |      1 |     0.00 |    -0.20
 D.D.D  |   5 |     64 |     46 |     0.10 |     0.10
 hameln |   4 |     70 |     33 |     0.05 |     0.05</code></pre>
      <ul>
      <li><code>ex-04_2.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã€æ¬¡ã®ã‚ˆã†ãªçµæœã‚»ãƒƒãƒˆã‚’å¾—ã‚‹ SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚
      <ul>
      <li>å¹³å‡ãƒ¬ãƒ™ãƒ«ã®é™é †ã«æ•´åˆ— (ã‚½ãƒ¼ãƒˆ) ã™ã‚‹ã“ã¨ã€‚</li>
      </ul></li>
      </ul>
      <pre><code>   job   | num | avg_lv 
---------+-----+--------
 Samurai |   3 |   70.3
 Wizard  |   4 |   58.3
 Ninja   |   2 |   54.0
 Priest  |   4 |   38.8
 Fighter |   4 |   37.3
 Monk    |   2 |   36.0</code></pre>
      <h2 data-number="8.1" id="group-byå¥ã®ä½¿ç”¨æ™‚ã«selectå¥ã§æŒ‡å®šå¯èƒ½ãªå€¤-é‡è¦"><span class="header-section-number">8.1</span> GROUP BYå¥ã®ä½¿ç”¨æ™‚ã«SELECTå¥ã§æŒ‡å®šå¯èƒ½ãªå€¤
      (é‡è¦ğŸš¨)</h2>
      <p><code>GROUP BY</code> å¥ã‚’ä½¿ç”¨ã—ãŸã¨ãã€<code>SELECT</code>
      å¥ã«è¨˜è¿°å¯èƒ½ãªã‚«ãƒ©ãƒ ã¯ã€Œ<code>GROUP BY</code> <strong>ã§æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ  (ï¼é›†ç´„ã‚­ãƒ¼)
      ã«é™ã‚‰ã‚Œã‚‹</strong>ã€ã¨ã„ã†ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚ãŸã¨ãˆã°ã€<code>GROUP BY job</code>
      ã¨ã—ãŸã¨ãã€<code>SELECT</code> å¥ã«ãã®ã¾ã¾è¨˜è¿°ã§ãã‚‹ã‚«ãƒ©ãƒ ã¯ <span class="masked"><code>job</code></span> ã ã‘ã§ã§ã‚ã‚Šã€<span class="masked"><code>id</code> ã‚„
      <code>level</code>ã€<code>name</code>ã€<code>guild</code></span>
      ãªã©ã‚’ç›´æ¥æŒ‡å®šã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ãã‚Œã‚‰ã‚’åˆ©ç”¨ã—ãŸã„å ´åˆã¯ã€<code>MAX(id)</code> ã‚„
      <code>AVG(level)</code> ã®ã‚ˆã†ã«é›†ç´„é–¢æ•° (ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«è¨ˆç®—ã™ã‚‹é–¢æ•°)
      ã‚’é©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
      <p>å®Ÿéš›ã«ã€æ¬¡ã® SQL ãŒã€Œ<strong>ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨</strong>ã€ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <div class="sourceCode" id="cb52" data-caption="é›†ç´„ã‚­ãƒ¼ä»¥å¤–ã®ã‚«ãƒ©ãƒ ã‚’SELECTå¥ã«æŒ‡å®š"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb52-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb52-1"></a><span class="kw">SELECT</span></span>
<span id="cb52-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb52-2"></a>  job,</span>
<span id="cb52-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb52-3"></a>  <span class="kw">level</span> <span class="co">-- é›†ç´„ã‚­ãƒ¼ä»¥å¤–ã®ã‚«ãƒ©ãƒ ã‚’æŒ‡å®š</span></span>
<span id="cb52-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb52-4"></a><span class="kw">FROM</span></span>
<span id="cb52-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb52-5"></a>  s_characters</span>
<span id="cb52-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb52-6"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb52-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb52-7"></a>  job; <span class="co">-- é›†ç´„ã‚­ãƒ¼ã¯ job</span></span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>psql:&lt;stdin&gt;:7: ERROR:  åˆ—"s_characters.level"ã¯GROUP BYå¥ã§æŒ‡å®šã™ã‚‹ã‹ã€é›†ç´„é–¢æ•°å†…ã§ä½¿ç”¨ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“</code></pre>
      <p>è‹±èªç’°å¢ƒã§ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>psql:&lt;stdin&gt;:7: ERROR:  column "s_characters.level" must appear in the GROUP BY clause or be used in an aggregate function</code></pre>
      <p><strong>ç¬¬03è¡Œç›®</strong> ã® <code>level</code> ã‚’ã€é›†ç´„é–¢æ•°ã‚’é©ç”¨ã—ãŸå½¢ (ãŸã¨ãˆã°
      <code>MAX(level)</code> ã‚„ <code>AVG(level)</code>)
      ã«ã™ã‚‹ã¨å•é¡Œãªãå®Ÿè¡Œã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
      <p><strong>(ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹)</strong></p>
      <blockquote>
      <p>SQLã«ãŠã„ã¦ã€<code>GROUP BY</code> å¥ã«æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ä»¥å¤–ã‚’ã€<code>SELECT</code>
      å¥ã«æŒ‡å®šã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã¯ãªãœã§ã™ã‹ã€‚ãŸã¨ãˆã°ã€<code>SELECT job, level FROM characters GROUP BY job;</code>
      ãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã¯ãªãœã§ã™ã‹ã€‚</p>
      </blockquote>
      <h2 data-number="8.2" id="group-byå¥ã«è¤‡æ•°ã®é›†ç´„ã‚­ãƒ¼ã‚’æŒ‡å®š"><span class="header-section-number">8.2</span> GROUP BYå¥ã«è¤‡æ•°ã®é›†ç´„ã‚­ãƒ¼ã‚’æŒ‡å®š</h2>
      <p>GROUP BYå¥ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã« <strong>è¤‡æ•°ã®ã‚«ãƒ©ãƒ </strong> ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb55" data-caption="GROUP BYå¥ã«è¤‡æ•°ã®é›†ç´„ã‚­ãƒ¼ã‚’æŒ‡å®š"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb55-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-1"></a><span class="kw">SELECT</span></span>
<span id="cb55-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-2"></a>  <span class="fu">COALESCE</span>(guild, <span class="st">'(Freelancer)'</span>) <span class="kw">AS</span> <span class="ot">"guild"</span>,</span>
<span id="cb55-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-3"></a>  job,</span>
<span id="cb55-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-4"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>)</span>
<span id="cb55-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-5"></a><span class="kw">FROM</span></span>
<span id="cb55-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-6"></a>  s_characters</span>
<span id="cb55-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-7"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb55-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-8"></a>  guild,</span>
<span id="cb55-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-9"></a>  job</span>
<span id="cb55-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-10"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb55-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-11"></a>  guild,</span>
<span id="cb55-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb55-12"></a>  job;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚å®Ÿè¡Œçµæœã‹ã‚‰ã‚ã‹ã‚‹ã‚ˆã†ã«ã€ã¾ãš <strong>guild</strong>
      ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚Œã€ãã®å†…éƒ¨ã§ã•ã‚‰ã« <strong>job</strong>
      ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€2ã¤ã®ã‚«ãƒ©ãƒ ã‚’çµ„ã¿åˆã‚ã›ã¦ã€Œã‚®ãƒ«ãƒ‰Ã—ã‚¸ãƒ§ãƒ–ã€å˜ä½ã§ä»¶æ•°ã‚’é›†è¨ˆã§ãã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p>
      <pre><code>    guild     |   job   | count 
--------------+---------+-------
 (Freelancer) | Fighter |     1
 (Freelancer) | Monk    |     1
 (Freelancer) | Priest  |     1
 (Freelancer) | Samurai |     1
 (Freelancer) | Wizard  |     1
 D.D.D        | Fighter |     1
 D.D.D        | Ninja   |     2
 D.D.D        | Wizard  |     2
 Yamato       | Fighter |     1
 Yamato       | Priest  |     3
 Yamato       | Samurai |     1
 hameln       | Fighter |     1
 hameln       | Monk    |     1
 hameln       | Samurai |     1
 hameln       | Wizard  |     1</code></pre>
      <ul>
      <li><code>GROUP BY</code> ã®é›†ç´„ã‚­ãƒ¼ã®é †åºã‚’å¤‰ãˆã¦ã‚‚ (ã™ãªã‚ã¡
      <code>GROUP BY guild, job</code> ã‚’ <code>GROUP BY job, guild</code>
      ã«å¤‰æ›´ã—ã¦ã‚‚)ã€çµæœã‚»ãƒƒãƒˆãŒåŒã˜ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
      <ul>
      <li>ãŸã ã— <code>ORDER BY</code> å¥ã‚’æŒ‡å®šã—ãªã„å ´åˆã€æ•´åˆ—é †ãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</li>
      </ul></li>
      </ul>
      <p><strong>(ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹)</strong></p>
      <blockquote>
      <p>SQLã«ãŠã„ã¦ã€<code>GROUP BY guild, job</code> ã‚’ <code>GROUP BY job, guild</code>
      ã«æ›¸ãæ›ãˆã¦ã‚‚ (<code>ORDER BY</code>
      å¥ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹é™ã‚Šã¯)ã€çµæœã‚»ãƒƒãƒˆãŒå¤‰ã‚ã‚‰ãªã„ã®ã¯ãªãœã§ã™ã‹ã€‚é›†ç´„ã‚­ãƒ¼ã®é †ç•ªã¯é–¢ä¿‚ãªã„ã®ã§ã™ã‹ã€‚</p>
      </blockquote>
      <h3 data-number="8.2.1" id="sqlãƒ‰ãƒªãƒ«-9"><span class="header-section-number">8.2.1</span>
      SQLãƒ‰ãƒªãƒ«</h3>
      <ul>
      <li><code>ex-04_3.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã€æ¬¡ã®ã‚ˆã†ãªçµæœã‚»ãƒƒãƒˆã‚’å¾—ã‚‹ã‚ˆã†ãª SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚
      <ul>
      <li>å¾Œè¡›è· (Priestã€Wizard) ã®ã¿ã‚’å¯¾è±¡ã¨ã™ã‚‹ã“ã¨ã€‚</li>
      </ul></li>
      </ul>
      <pre><code>  job   | guild  | count | avg_lv 
--------+--------+-------+--------
 Priest | Yamato |     3 |   42.3
 Priest |        |     1 |   28.0
 Wizard | D.D.D  |     2 |   57.5
 Wizard | hameln |     1 |   61.0
 Wizard |        |     1 |   57.0</code></pre>
      <h2 data-number="8.3" id="rollupã«ã‚ˆã‚‹å…¨ä½“é›†è¨ˆ"><span class="header-section-number">8.3</span>
      ROLLUPã«ã‚ˆã‚‹å…¨ä½“é›†è¨ˆ</h2>
      <p><code>GROUP BY</code>
      ã§ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«é›†è¨ˆã—ãŸã¨ãã«ã€ã€Œ<strong>ãƒ¬ã‚³ãƒ¼ãƒ‰å…¨ä½“ã®é›†è¨ˆ</strong>ã€ã‚‚åŒæ™‚ã«å‡ºåŠ›ã—ãŸã„ã¨ãã¯ã€<code>ROLLUP</code>
      ã¨ã„ã† <code>GROUP BY</code>
      å¥ã®æ‹¡å¼µæ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãŸã¨ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã¨ã€Œ<code>guild</code>
      ã”ã¨ã®é›†è¨ˆã€ã«ã€Œå…¨ä½“ã®é›†è¨ˆã€ã‚’åŠ ãˆãŸçµæœã‚»ãƒƒãƒˆã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb58" data-caption="ROLLUPã®åˆ©ç”¨"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb58-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-1"></a><span class="kw">SELECT</span></span>
<span id="cb58-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-2"></a>  guild,</span>
<span id="cb58-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-3"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="kw">level</span>), <span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_lv"</span>,</span>
<span id="cb58-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-4"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span></span>
<span id="cb58-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-5"></a><span class="kw">FROM</span></span>
<span id="cb58-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-6"></a>  s_characters</span>
<span id="cb58-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-7"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb58-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-8"></a>  <span class="kw">ROLLUP</span> (guild) <span class="co">-- â—€ ã“ã“ã«æ³¨ç›®</span></span>
<span id="cb58-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-9"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb58-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb58-10"></a>  guild;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚çµæœã‚»ãƒƒãƒˆã®<strong>ç¬¬5è¡Œç›®</strong> ( num ãŒ
      <code>5</code> ã®è¡Œ) ãŒ <strong>guild</strong> ãŒ <code>NULL</code>
      ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ã®é›†è¨ˆã€<strong>ç¬¬4è¡Œç›®</strong> ( num ãŒ <code>19</code> ã®è¡Œ)
      ãŒãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä½“ã®é›†è¨ˆã¨ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> guild  | avg_lv | num 
--------+--------+-----
 D.D.D  |   55.8 |   5
 Yamato |   48.6 |   5
 hameln |   52.0 |   4
        |   48.8 |  19
        |   39.6 |   5</code></pre>
      <p>ç©ºæ¬„ã‚’åˆ¥ã®æ–‡å­—ã«ç½®ãæ›ãˆãŸã„ã¨ãã¯ã€æ¬¡ã®ã‚ˆã†ã« <code>GROUPING</code> é–¢æ•°ã¨
      <strong>CASEå¼</strong> ã‚’çµ„ã¿åˆã‚ã›ã¦åˆ©ç”¨ã—ã¾ã™ã€‚ã“ã“ã§ <code>GROUPING(guild)</code>
      ã¯ã€é›†è¨ˆè¡Œãªã‚‰<code>1</code>ã€é€šå¸¸è¡Œãªã‚‰ <code>0</code> ã‚’è¿”ã™ç‰¹æ®Šé–¢æ•°ã§ã™ã€‚</p>
      <div class="sourceCode" id="cb60" data-caption="GROUPINGé–¢æ•°ã®åˆ©ç”¨"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb60-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-1"></a><span class="kw">SELECT</span></span>
<span id="cb60-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-2"></a>  <span class="cf">CASE</span></span>
<span id="cb60-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-3"></a>    <span class="cf">WHEN</span> <span class="fu">GROUPING</span>(guild) <span class="op">=</span> <span class="dv">1</span> <span class="cf">THEN</span> <span class="st">'(Total)'</span></span>
<span id="cb60-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-4"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="st">'(Freelancer)'</span></span>
<span id="cb60-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-5"></a>    <span class="cf">ELSE</span> guild</span>
<span id="cb60-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-6"></a>  <span class="cf">END</span> <span class="kw">AS</span> <span class="ot">"guild"</span>,</span>
<span id="cb60-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-7"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="kw">level</span>), <span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_lv"</span>,</span>
<span id="cb60-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-8"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span></span>
<span id="cb60-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-9"></a><span class="kw">FROM</span></span>
<span id="cb60-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-10"></a>  s_characters</span>
<span id="cb60-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-11"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb60-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-12"></a>  <span class="kw">ROLLUP</span> (guild)</span>
<span id="cb60-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-13"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb60-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb60-14"></a>  guild;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>    guild     | avg_lv | num 
--------------+--------+-----
 (Freelancer) |   39.6 |   5
 (Total)      |   48.8 |  19
 D.D.D        |   55.8 |   5
 Yamato       |   48.6 |   5
 hameln       |   52.0 |   4</code></pre>
      <div class="note type-senior">
      <p><strong>EX: ä¸¦ã³é †ã‚‚å³å¯†ã«åˆ¶å¾¡ã—ãŸã„ã¨ãã¯â€¦</strong></p>
      <p>æ¬¡ã®ã‚ˆã†ã« <code>ORDER BY</code> å¥ã®ãªã‹ã§ã€<code>GROUPING</code> é–¢æ•°ã¨
      <strong>CASEå¼</strong> ã‚’çµ„ã¿åˆã‚ã›ã¦åˆ©ç”¨ã—ã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb62" data-caption="GROUPINGé–¢æ•°ã®åˆ©ç”¨"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb62-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-1"></a><span class="kw">SELECT</span></span>
<span id="cb62-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-2"></a>  <span class="cf">CASE</span></span>
<span id="cb62-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-3"></a>    <span class="cf">WHEN</span> <span class="fu">GROUPING</span>(guild) <span class="op">=</span> <span class="dv">1</span> <span class="cf">THEN</span> <span class="st">'(Total)'</span></span>
<span id="cb62-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-4"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="st">'(Freelancer)'</span></span>
<span id="cb62-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-5"></a>    <span class="cf">ELSE</span> guild</span>
<span id="cb62-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-6"></a>  <span class="cf">END</span> <span class="kw">AS</span> <span class="ot">"guild"</span>,</span>
<span id="cb62-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-7"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="kw">level</span>), <span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_lv"</span>,</span>
<span id="cb62-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-8"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span></span>
<span id="cb62-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-9"></a><span class="kw">FROM</span></span>
<span id="cb62-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-10"></a>  s_characters</span>
<span id="cb62-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-11"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb62-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-12"></a>  <span class="kw">ROLLUP</span> (guild)</span>
<span id="cb62-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-13"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb62-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-14"></a>  <span class="cf">CASE</span> <span class="co">-- â—€ ã“ã“ã‹ã‚‰ã‚’æ³¨ç›®</span></span>
<span id="cb62-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-15"></a>    <span class="cf">WHEN</span> <span class="fu">GROUPING</span>(guild) <span class="op">=</span> <span class="dv">1</span> <span class="cf">THEN</span> <span class="dv">3</span> <span class="co">-- æ•´åˆ—é †ç¬¬3ä½</span></span>
<span id="cb62-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-16"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="dv">2</span> <span class="co">-- æ•´åˆ—é †ç¬¬2ä½</span></span>
<span id="cb62-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-17"></a>    <span class="cf">ELSE</span> <span class="dv">1</span> <span class="co">-- æ•´åˆ—é †ç¬¬1ä½</span></span>
<span id="cb62-18"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-18"></a>  <span class="cf">END</span>,</span>
<span id="cb62-19"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb62-19"></a>  <span class="fu">LOWER</span>(guild); <span class="co">-- æ•´åˆ—é †ç¬¬1ä½ã®ãªã‹ã§å¤§æ–‡å­—ã¨å°æ–‡å­—ã‚’åŒºåˆ¥ã›ãšæ˜‡é †</span></span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>    guild     | avg_lv | num 
--------------+--------+-----
 D.D.D        |   55.8 |   5
 hameln       |   52.0 |   4
 Yamato       |   48.6 |   5
 (Freelancer) |   39.6 |   5
 (Total)      |   48.8 |  19</code></pre>
      <p>ãªãŠã€<code>ROLLUP</code>
      ã®çµæœã‚’å«ã‚ãŸä¸¦ã³é †ã‚„è¡¨ç¤ºä½“è£ã®ç´°ã‹ã„åˆ¶å¾¡ã¯ã€SQLã§ã‚‚å®Ÿç¾ã¯å¯èƒ½ã§ã™ãŒã€<strong>è¤‡é›‘ã«ãªã‚Šã‚„ã™ã„å‡¦ç†</strong>ã§ã™ã€‚å¯èª­æ€§ã‚„ä¿å®ˆæ€§ã‚’è€ƒãˆã‚‹ã¨ã€æœ€çµ‚çš„ãªè¡¨ç¤ºé †ã‚„ä½“è£ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§èª¿æ•´ã™ã‚‹ã»ã†ãŒå®Ÿç”¨çš„ãªã‚±ãƒ¼ã‚¹ã‚‚å¤šã„ã“ã¨ã‚’è¦šãˆã¦ãŠã„ã¦ãã ã•ã„ã€‚</p>
      </div>
      <h3 data-number="8.3.1" id="sqlãƒ‰ãƒªãƒ«-10"><span class="header-section-number">8.3.1</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-04_4.sql</code> ğŸ‘‰ <strong>s_characters</strong> ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã€æ¬¡ã®ã‚ˆã†ã«
      <strong>job</strong> ã”ã¨ã«æœ€å¤§ãƒ¬ãƒ™ãƒ«ã€å¹³å‡ãƒ¬ãƒ™ãƒ«ã€äººæ•°ã‚’å¾—ã‚‹ã‚ˆã†ãª SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚
      <ul>
      <li>å…¨ä½“ã«ã¤ã„ã¦ã‚‚ã€åŒæ§˜ã®é›†è¨ˆå‡¦ç†ã‚’å®Ÿæ–½ã—ã¦ <code>-TOTAL-</code>
      ã¨ã„ã†ãƒ©ãƒ™ãƒ«ã‚’ã¤ã‘ã‚‹ã“ã¨ã€‚</li>
      </ul></li>
      </ul>
      <pre><code>   job   | max_lv | avg_lv | num 
---------+--------+--------+-----
 -TOTAL- |     73 |   48.8 |  19
 Fighter |     56 |   37.3 |   4
 Monk    |     39 |   36.0 |   2
 Ninja   |     62 |   54.0 |   2
 Priest  |     50 |   38.8 |   4
 Samurai |     73 |   70.3 |   3
 Wizard  |     64 |   58.3 |   4</code></pre>
      <h2 data-number="8.4" id="group-byå¥ã«caseå¼ã‚’åˆ©ç”¨"><span class="header-section-number">8.4</span> GROUP BYå¥ã«CASEå¼ã‚’åˆ©ç”¨</h2>
      <p><code>GROUP BY</code> å¥ã« <strong>CASEå¼</strong>
      ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€<strong>ã‚ˆã‚ŠæŸ”è»Ÿã«ã‚°ãƒ«ãƒ¼ãƒ—ã‚’å®šç¾©ã—ã¦</strong>é›†è¨ˆå‡¦ç†ã‚’ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚ãŸã¨ãˆã°ã€Œã‚®ãƒ«ãƒ‰æ‰€å±è€…ã€ã¨ã€Œç„¡æ‰€å±è€…ã€ã§ã‚°ãƒ«ãƒ¼ãƒ—ã‚’åˆ†ã‘ã¦é›†è¨ˆå‡¦ç†ã‚’ã—ãŸã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«
      SQL ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb65" data-caption="GROUP BYå¥ ã« CASEå¼ ã‚’åˆ©ç”¨"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb65-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-1"></a><span class="kw">SELECT</span></span>
<span id="cb65-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-2"></a>  <span class="cf">CASE</span></span>
<span id="cb65-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-3"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="st">'ç„¡æ‰€å±'</span></span>
<span id="cb65-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-4"></a>    <span class="cf">ELSE</span> <span class="st">'ã‚®ãƒ«ãƒ‰æ‰€å±'</span></span>
<span id="cb65-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-5"></a>  <span class="cf">END</span> <span class="kw">AS</span> <span class="ot">"ã‚«ãƒ†ã‚´ãƒª"</span>,</span>
<span id="cb65-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-6"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="kw">level</span>), <span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_lv"</span>,</span>
<span id="cb65-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-7"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span></span>
<span id="cb65-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-8"></a><span class="kw">FROM</span></span>
<span id="cb65-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-9"></a>  s_characters</span>
<span id="cb65-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-10"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb65-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-11"></a>  <span class="cf">CASE</span></span>
<span id="cb65-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-12"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="st">'ç„¡æ‰€å±'</span></span>
<span id="cb65-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-13"></a>    <span class="cf">ELSE</span> <span class="st">'ã‚®ãƒ«ãƒ‰æ‰€å±'</span></span>
<span id="cb65-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb65-14"></a>  <span class="cf">END</span>;</span></code></pre></div>
      <p>ã“ã“ã§ã€<code>SELECT</code> å¥ã«ã¯ <span class="masked"><code>GROUP BY</code> å¥ã§æŒ‡å®šã—ãŸ
      CASEå¼ ã¨åŒã˜çµæœã‚’è¿”ã™å¼ã‚’è¨˜è¿°ã™ã‚‹å¿…è¦</span> ãŒã‚ã‚Šã¾ã™ã€‚ - <code>GROUP BY</code>
      ã«æŒ‡å®šã—ã¦ã„ãªã„å¼ã‚„ã‚«ãƒ©ãƒ ã‚’ (é›†ç´„é–¢æ•°ã‚’é©ç”¨ã›ãšã«) <code>SELECT</code>
      ã«å«ã‚ã‚‹ã¨ã€<strong>ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚Œã¦ã„ãªã„ã‚«ãƒ©ãƒ ã®å‚ç…§</strong>
      ã¨ã¿ãªã•ã‚Œã€ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚</p>
      <p>å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>  ã‚«ãƒ†ã‚´ãƒª  | avg_lv | num 
------------+--------+-----
 ã‚®ãƒ«ãƒ‰æ‰€å± |   52.1 |  14
 ç„¡æ‰€å±     |   39.6 |   5</code></pre>
      <div class="note type-senior">
      <p><strong>EX: æ•´åˆ—é †ã‚‚å³å¯†ã«åˆ¶å¾¡ã—ãŸã„å ´åˆã¯â€¦</strong></p>
      <p><code>GROUP BY</code> å¥ã« <strong>CASEå¼</strong>
      ã‚’ä½¿ç”¨ã—ãŸã¨ãã€æ•´åˆ—é †ã‚‚å³å¯†ã«åˆ¶å¾¡ã—ãŸã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb67" data-caption="æ•´åˆ—é †ã‚’åˆ¶å¾¡ã™ã‚‹ä¾‹"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb67-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-1"></a><span class="kw">SELECT</span></span>
<span id="cb67-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-2"></a>  <span class="cf">CASE</span></span>
<span id="cb67-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-3"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb67-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-4"></a>    <span class="cf">ELSE</span> <span class="dv">1</span></span>
<span id="cb67-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-5"></a>  <span class="cf">END</span> <span class="kw">AS</span> <span class="ot">"ID"</span>, </span>
<span id="cb67-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-6"></a>  <span class="cf">CASE</span></span>
<span id="cb67-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-7"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="st">'ç„¡æ‰€å±'</span></span>
<span id="cb67-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-8"></a>    <span class="cf">ELSE</span> <span class="st">'ã‚®ãƒ«ãƒ‰æ‰€å±'</span></span>
<span id="cb67-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-9"></a>  <span class="cf">END</span> <span class="kw">AS</span> <span class="ot">"ã‚«ãƒ†ã‚´ãƒª"</span>,</span>
<span id="cb67-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-10"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="kw">level</span>), <span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_lv"</span>,</span>
<span id="cb67-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-11"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span></span>
<span id="cb67-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-12"></a><span class="kw">FROM</span></span>
<span id="cb67-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-13"></a>  s_characters</span>
<span id="cb67-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-14"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb67-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-15"></a>  <span class="cf">CASE</span></span>
<span id="cb67-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-16"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="st">'ç„¡æ‰€å±'</span></span>
<span id="cb67-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-17"></a>    <span class="cf">ELSE</span> <span class="st">'ã‚®ãƒ«ãƒ‰æ‰€å±'</span></span>
<span id="cb67-18"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-18"></a>  <span class="cf">END</span>,</span>
<span id="cb67-19"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-19"></a>  <span class="cf">CASE</span></span>
<span id="cb67-20"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-20"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb67-21"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-21"></a>    <span class="cf">ELSE</span> <span class="dv">1</span></span>
<span id="cb67-22"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-22"></a>  <span class="cf">END</span></span>
<span id="cb67-23"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-23"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb67-24"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-24"></a>  <span class="cf">CASE</span></span>
<span id="cb67-25"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-25"></a>    <span class="cf">WHEN</span> guild <span class="kw">IS</span> <span class="kw">NULL</span> <span class="cf">THEN</span> <span class="dv">2</span></span>
<span id="cb67-26"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-26"></a>    <span class="cf">ELSE</span> <span class="dv">1</span></span>
<span id="cb67-27"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb67-27"></a>  <span class="cf">END</span>;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> ID |  ã‚«ãƒ†ã‚´ãƒª  | avg_lv | num 
----+------------+--------+-----
  1 | ã‚®ãƒ«ãƒ‰æ‰€å± |   52.1 |  14
  2 | ç„¡æ‰€å±     |   39.6 |   5</code></pre>
      </div>
      <h3 data-number="8.4.1" id="sqlãƒ‰ãƒªãƒ«-11"><span class="header-section-number">8.4.1</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-04_5.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã€æ¬¡ã®ã‚ˆã†ã«å‰è¡›è·ã¨å¾Œè¡›è·ã§ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ã‚ã‘ã¦æœ€å¤§ãƒ¬ãƒ™ãƒ«ã€å¹³å‡ãƒ¬ãƒ™ãƒ«ã€äººæ•°ã‚’å¾—ã‚‹ã‚ˆã†ãª
      SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚</li>
      </ul>
      <pre><code> battle_position | max_lv | avg_lv | num 
-----------------+--------+--------+-----
 backline        |     64 |   48.5 |   8
 frontline       |     73 |   49.1 |  11</code></pre>
      <h2 data-number="8.5" id="date_truncé–¢æ•°ã‚’åˆ©ç”¨ã—ãŸæ™‚é–“è»¸ã«æ²¿ã£ãŸé›†è¨ˆå‡¦ç†"><span class="header-section-number">8.5</span> DATE_TRUNCé–¢æ•°ã‚’åˆ©ç”¨ã—ãŸæ™‚é–“è»¸ã«æ²¿ã£ãŸé›†è¨ˆå‡¦ç†</h2>
      <p><code>GROUP BY</code> å¥ã¯ã€<strong>æ™‚é–“è»¸ã«æ²¿ã£ã¦é›†è¨ˆå‡¦ç†</strong>
      (æ—¥æ™‚ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦é›†è¨ˆå‡¦ç†) ã‚’ã—ãŸã„å ´é¢ã§ã‚‚ç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚ã“ã®éš›ã€PostgreSQL ã§ã¯
      <code>DATE_TRUNC</code> é–¢æ•°ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ SQL
      ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®é–¢æ•°ã¯ <span class="masked">æŒ‡å®šã—ãŸå˜ä½ã§æ—¥æ™‚ã‚’åˆ‡ã‚Šæ¨ã¦ã‚‹é–¢æ•°</span> ã§ã€æ¬¡ã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™ã€‚</p>
      <ul>
      <li><code>DATE_TRUNC('hour', TIMESTAMP '2025-10-30 15:30:58')</code> ğŸ‘‰
      <code>2025-10-30 15:00:00</code> (TIMESTAMPå‹)</li>
      <li><code>DATE_TRUNC('month', TIMESTAMP '2025-10-30 15:30:58')</code> ğŸ‘‰
      <code>2025-10-01 00:00:00</code> ( ã€ƒ )</li>
      <li><code>DATE_TRUNC('year', TIMESTAMP '2025-10-30 15:30:58')</code> ğŸ‘‰
      <code>2025-01-01 00:00:00</code> ( ã€ƒ )
      <ul>
      <li>ç¬¬1å¼•æ•°ã«æŒ‡å®šå¯èƒ½ãªå€¤ (æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«) ã¯<a href="https://www.postgresql.org/docs/current/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC">å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>
      ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</li>
      <li><code>DATE_TRUNC</code> ã¯ <span class="masked">æ¨™æº–SQLã§ã¯ãªãPostgreSQL ã®ç‹¬è‡ªé–¢æ•°
      (æ‹¡å¼µ)</span> ã§ã™ã€‚</li>
      <li>ç¬¬2å¼•æ•°ã«ã¯ <code>DATE</code> å‹ã‚„ <code>INTERVAL</code> å‹ã‚’ã¨ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</li>
      </ul></li>
      </ul>
      <p>ãŸã¨ãˆã°ã€<strong>æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚</strong> (<code>last_login_at</code>)
      ã‚’ã€æœˆå˜ä½ã§ã¾ã¨ã‚ã¦ã€ãã®ä»¶æ•°ã‚’æ±‚ã‚ãŸã„ã¨ãã€<code>DATE_TRUNC</code> ã‚’åˆ©ç”¨ã™ã‚Œã°ä»¥ä¸‹ã®ã‚ˆã†ã«
      SQL ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb70" data-caption="æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ã®æœˆåˆ¥é›†è¨ˆ(1)"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb70-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb70-1"></a><span class="kw">SELECT</span></span>
<span id="cb70-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb70-2"></a>  DATE_TRUNC(<span class="st">'month'</span>, last_login_at) <span class="kw">AS</span> <span class="ot">"date"</span>, <span class="co">-- â—€ ã“ã“ã«æ³¨ç›®</span></span>
<span id="cb70-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb70-3"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span></span>
<span id="cb70-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb70-4"></a><span class="kw">FROM</span></span>
<span id="cb70-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb70-5"></a>  s_characters</span>
<span id="cb70-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb70-6"></a><span class="kw">WHERE</span></span>
<span id="cb70-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb70-7"></a>  last_login_at <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb70-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb70-8"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb70-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb70-9"></a>  DATE_TRUNC(<span class="st">'month'</span>, last_login_at); <span class="co">-- â—€ ã“ã“ã«æ³¨ç›®</span></span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>        date         | num 
---------------------+-----
 2025-09-01 00:00:00 |   6
 2025-07-01 00:00:00 |   4
 2025-08-01 00:00:00 |   4
 2025-10-01 00:00:00 |   4</code></pre>
      <p>ä½“è£ã‚’æ•´ãˆãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä»¥ä¸‹ã® SQL ã® <strong>ç¬¬02è¡Œç›®</strong> ã®
      <code>TO_CHAR</code> é–¢æ•°ã¯ã€<a href="https://takeshiwada1980.github.io/DB-2025/lecture03.html#%E6%97%A5%E4%BB%98%E6%99%82%E5%88%BB%E9%96%A2%E6%95%B0%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B-%E6%8E%88%E6%A5%AD%E6%99%82%E9%96%93%E5%A4%96%E5%AD%A6%E7%BF%92">ç¬¬03å›è¬›ç¾©</a>ã§ç´¹ä»‹ã—ãŸã‚ˆã†ã«æ—¥æ™‚ãªã©ã‚’æ•´å½¢å‡ºåŠ›ã™ã‚‹é–¢æ•°ã§ã™ã€‚</p>
      <div class="sourceCode" id="cb72" data-caption="æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ã®æœˆåˆ¥é›†è¨ˆ(2)"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb72-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-1"></a><span class="kw">SELECT</span></span>
<span id="cb72-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-2"></a>  <span class="fu">TO_CHAR</span>(DATE_TRUNC(<span class="st">'month'</span>, last_login_at), <span class="st">'YYYY/MM'</span>) <span class="kw">AS</span> <span class="ot">"date"</span>,</span>
<span id="cb72-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-3"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span></span>
<span id="cb72-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-4"></a><span class="kw">FROM</span></span>
<span id="cb72-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-5"></a>  s_characters</span>
<span id="cb72-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-6"></a><span class="kw">WHERE</span></span>
<span id="cb72-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-7"></a>  last_login_at <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb72-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-8"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb72-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-9"></a>  DATE_TRUNC(<span class="st">'month'</span>, last_login_at)</span>
<span id="cb72-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-10"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb72-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb72-11"></a>  <span class="ot">"date"</span>;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code>  date   | num 
---------+-----
 2025/07 |   4
 2025/08 |   4
 2025/09 |   6
 2025/10 |   4</code></pre>
      <h3 data-number="8.5.1" id="å‚è€ƒ-date_truncé–¢æ•°ã‚’ä½¿ç”¨ã›ãšã«åŒæ§˜ã®é›†è¨ˆã‚’ã™ã‚‹"><span class="header-section-number">8.5.1</span> å‚è€ƒ:
      DATE_TRUNCé–¢æ•°ã‚’ä½¿ç”¨ã›ãšã«åŒæ§˜ã®é›†è¨ˆã‚’ã™ã‚‹</h3>
      <p><code>DATE_TRUNC</code>
      é–¢æ•°ã‚’ä½¿ç”¨ã›ãšã«ã€æ¨™æº–SQLã§åŒæ§˜ã®å‡¦ç†ã‚’ã—ãŸã„å ´åˆã«ã¯ã€<strong>CASEå¼</strong>
      ã§æœˆã”ã¨ã®åŒºåˆ†ã‚’è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
      <div class="sourceCode" id="cb74" data-caption="æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ã®æœˆåˆ¥é›†è¨ˆ(DATE_TRUNCé–¢æ•°ã‚’ä¸ä½¿ç”¨)"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb74-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-1"></a><span class="kw">SELECT</span></span>
<span id="cb74-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-2"></a>  <span class="cf">CASE</span></span>
<span id="cb74-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-3"></a>    <span class="cf">WHEN</span> last_login_at <span class="op">&gt;=</span> <span class="dt">DATE</span> <span class="st">'2025-07-01'</span> <span class="kw">AND</span></span>
<span id="cb74-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-4"></a>    last_login_at <span class="op">&lt;</span> <span class="dt">DATE</span> <span class="st">'2025-08-01'</span> <span class="cf">THEN</span> <span class="st">'2025/07'</span></span>
<span id="cb74-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-5"></a>    <span class="cf">WHEN</span> last_login_at <span class="op">&gt;=</span> <span class="dt">DATE</span> <span class="st">'2025-08-01'</span> <span class="kw">AND</span></span>
<span id="cb74-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-6"></a>    last_login_at <span class="op">&lt;</span> <span class="dt">DATE</span> <span class="st">'2025-09-01'</span> <span class="cf">THEN</span> <span class="st">'2025/08'</span></span>
<span id="cb74-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-7"></a>    <span class="cf">WHEN</span> last_login_at <span class="op">&gt;=</span> <span class="dt">DATE</span> <span class="st">'2025-09-01'</span> <span class="kw">AND</span></span>
<span id="cb74-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-8"></a>    last_login_at <span class="op">&lt;</span> <span class="dt">DATE</span> <span class="st">'2025-10-01'</span> <span class="cf">THEN</span> <span class="st">'2025/09'</span></span>
<span id="cb74-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-9"></a>    <span class="cf">WHEN</span> last_login_at <span class="op">&gt;=</span> <span class="dt">DATE</span> <span class="st">'2025-10-01'</span> <span class="kw">AND</span></span>
<span id="cb74-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-10"></a>    last_login_at <span class="op">&lt;</span> <span class="dt">DATE</span> <span class="st">'2025-11-01'</span> <span class="cf">THEN</span> <span class="st">'2025/10'</span></span>
<span id="cb74-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-11"></a>    <span class="cf">ELSE</span> <span class="st">'(ãã®ä»–)'</span></span>
<span id="cb74-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-12"></a>  <span class="cf">END</span> <span class="kw">AS</span> <span class="ot">"date"</span>,</span>
<span id="cb74-13"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-13"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span></span>
<span id="cb74-14"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-14"></a><span class="kw">FROM</span></span>
<span id="cb74-15"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-15"></a>  s_characters</span>
<span id="cb74-16"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-16"></a><span class="kw">WHERE</span></span>
<span id="cb74-17"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-17"></a>  last_login_at <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb74-18"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-18"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb74-19"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-19"></a>  <span class="cf">CASE</span></span>
<span id="cb74-20"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-20"></a>    <span class="cf">WHEN</span> last_login_at <span class="op">&gt;=</span> <span class="dt">DATE</span> <span class="st">'2025-07-01'</span> <span class="kw">AND</span></span>
<span id="cb74-21"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-21"></a>    last_login_at <span class="op">&lt;</span> <span class="dt">DATE</span> <span class="st">'2025-08-01'</span> <span class="cf">THEN</span> <span class="st">'2025/07'</span></span>
<span id="cb74-22"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-22"></a>    <span class="cf">WHEN</span> last_login_at <span class="op">&gt;=</span> <span class="dt">DATE</span> <span class="st">'2025-08-01'</span> <span class="kw">AND</span></span>
<span id="cb74-23"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-23"></a>    last_login_at <span class="op">&lt;</span> <span class="dt">DATE</span> <span class="st">'2025-09-01'</span> <span class="cf">THEN</span> <span class="st">'2025/08'</span></span>
<span id="cb74-24"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-24"></a>    <span class="cf">WHEN</span> last_login_at <span class="op">&gt;=</span> <span class="dt">DATE</span> <span class="st">'2025-09-01'</span> <span class="kw">AND</span></span>
<span id="cb74-25"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-25"></a>    last_login_at <span class="op">&lt;</span> <span class="dt">DATE</span> <span class="st">'2025-10-01'</span> <span class="cf">THEN</span> <span class="st">'2025/09'</span></span>
<span id="cb74-26"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-26"></a>    <span class="cf">WHEN</span> last_login_at <span class="op">&gt;=</span> <span class="dt">DATE</span> <span class="st">'2025-10-01'</span> <span class="kw">AND</span></span>
<span id="cb74-27"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-27"></a>    last_login_at <span class="op">&lt;</span> <span class="dt">DATE</span> <span class="st">'2025-11-01'</span> <span class="cf">THEN</span> <span class="st">'2025/10'</span></span>
<span id="cb74-28"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-28"></a>    <span class="cf">ELSE</span> <span class="st">'(ãã®ä»–)'</span></span>
<span id="cb74-29"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-29"></a>  <span class="cf">END</span></span>
<span id="cb74-30"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-30"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb74-31"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb74-31"></a>  <span class="ot">"date"</span>;</span></code></pre></div>
      <div class="note type-caution">
      <p><strong>æ—¥æ™‚ã®å–ã‚Šæ‰±ã„ã«é–¢ã™ã‚‹æ³¨æ„</strong></p>
      <p><strong>last_login_at</strong>
      ãŒTIMESTAMPå‹ã®ã¨ãã€<code>last_login_at BETWEEN DATE '2025-07-01' AND DATE '2025-07-31'</code>
      ã®ã‚ˆã†ãªæ¡ä»¶ã‚’è¨˜è¿°ã™ã‚‹ã¨ã€2025å¹´07æœˆ31æ—¥ã® <strong>00æ™‚00åˆ†00ç§’ã¡ã‚‡ã†ã©</strong>
      ã¾ã§ã—ã‹å«ã¾ã‚Œãªããªã‚‹ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã¯ <span class="masked"><code>DATE '2025-07-31'</code> ãŒ <code>2025-07-31 00:00:00</code></span>
      ã«å¤‰æ›ã•ã‚Œã‚‹ãŸã‚ã§ã™ã€‚</p>
      <p>ãã®ãŸã‚ã€<strong>last_login_at</strong> ãŒ <span class="masked"><code>2025-07-31 01:00:00</code></span> ã®ã¨ãã¯ã€ãã®æ¡ä»¶ã¯
      <strong>çœŸã«ã¯ãªã‚‰ãªã„</strong> ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>
      </div>
      <h3 data-number="8.5.2" id="sqlãƒ‰ãƒªãƒ«-12"><span class="header-section-number">8.5.2</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <ul>
      <li><code>ex-04_6.sql</code> ğŸ‘‰ <strong>s_characters</strong> ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¤ã„ã¦ã€æ¬¡ã®ã‚ˆã†ã«
      <strong>created_on</strong> ã§å¹´åˆ¥ã«ã€Œäººæ•°ã€ã¨ã€Œå¹³å‡ãƒ¬ãƒ™ãƒ«ã€ã‚’é›†è¨ˆã—ãŸçµæœã‚»ãƒƒãƒˆã‚’å¾—ã‚‹ã‚ˆã†ãª
      SQL ã‚’è¨˜è¿°ã›ã‚ˆã€‚</li>
      </ul>
      <pre><code> year | num | avg_lv 
------+-----+--------
 2020 |   4 |   38.8
 2021 |   3 |   43.0
 2022 |   4 |   50.3
 2023 |   4 |   57.0
 2024 |   4 |   53.8</code></pre>
      <h1 data-number="9" id="having-å¥"><span class="header-section-number">9</span> HAVING å¥</h1>
      <p><code>GROUP BY</code> ã§ <strong>é›†ç´„ã—ãŸçµæœã‚’æ¡ä»¶ã§çµã‚Šè¾¼ã¿ãŸã„</strong>
      ã¨ãã¯ã€<code>HAVING</code> å¥ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
      <ul>
      <li><strong>é›†ç´„å‰ã®ãƒ¬ã‚³ãƒ¼ãƒ‰å˜ä½“</strong> ã«å¯¾ã—ã¦æ¡ä»¶ã‚’æŒ‡å®šã—ãŸã„å ´åˆã¯ <code>WHERE</code>
      å¥ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</li>
      </ul>
      <p>ä¾‹ãˆã°ã€<code>GROUP BY guild</code>
      ã«ã‚ˆã£ã¦ã€æ‰€å±ã‚®ãƒ«ãƒ‰ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã€å„ã‚°ãƒ«ãƒ¼ãƒ—ã®å¹³å‡ãƒ¬ãƒ™ãƒ«ãŒã€Œ50ä»¥ä¸Šã€ã®ã‚‚ã®ã ã‘ã‚’æŠ½å‡ºã—ãŸã„å ´åˆã¯ã€<code>HAVING</code>
      å¥ã‚’ä½¿ã£ã¦æ¬¡ã®ã‚ˆã†ã« SQL ã‚’è¨˜è¿°ã—ã¾ã™ã€‚</p>
      <ul>
      <li><code>HAVING</code>
      å¥ã§ã¯ã€é›†ç´„é–¢æ•°ã‚’ä½¿ã‚ãšã«é›†ç´„ã‚­ãƒ¼ä»¥å¤–ã®ã‚«ãƒ©ãƒ ã‚’ç›´æ¥å‚ç…§ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ä¾‹ãˆã°
      <code>buff &gt; 0.0</code> ã®ã‚ˆã†ãªæ¡ä»¶å¼ã¯ <code>HAVING</code> ã§ã¯ãªã <code>WHERE</code>
      å¥ã§æŒ‡å®šã—ã¾ã™ã€‚</li>
      </ul>
      <div class="sourceCode" id="cb76" data-caption="HAVINGå¥ã®ä½¿ç”¨ä¾‹"><pre class="sourceCode numberSource sql numberLines"><code class="sourceCode sql"><span id="cb76-1"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-1"></a><span class="kw">SELECT</span></span>
<span id="cb76-2"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-2"></a>  <span class="fu">COALESCE</span>(guild,<span class="st">'Freelancer'</span>) <span class="kw">AS</span> <span class="ot">"guild"</span>,</span>
<span id="cb76-3"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-3"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> <span class="ot">"num"</span>,</span>
<span id="cb76-4"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-4"></a>  <span class="fu">ROUND</span>(<span class="fu">AVG</span>(<span class="kw">level</span>), <span class="dv">1</span>) <span class="kw">AS</span> <span class="ot">"avg_lv"</span></span>
<span id="cb76-5"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-5"></a><span class="kw">FROM</span></span>
<span id="cb76-6"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-6"></a>  s_characters</span>
<span id="cb76-7"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-7"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb76-8"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-8"></a>  guild</span>
<span id="cb76-9"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-9"></a><span class="kw">HAVING</span></span>
<span id="cb76-10"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-10"></a>  <span class="fu">AVG</span>(<span class="kw">level</span>) <span class="op">&gt;=</span> <span class="dv">50</span></span>
<span id="cb76-11"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-11"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb76-12"><a href="https://takeshiwada1980.github.io/DB-2025/lecture05.html#cb76-12"></a>  <span class="fu">AVG</span>(<span class="kw">level</span>) <span class="kw">DESC</span>;</span></code></pre></div>
      <p>å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
      <pre><code> guild  | num | avg_lv 
--------+-----+--------
 D.D.D  |   5 |   55.8
 hameln |   4 |   52.0</code></pre>
      <p>ãªãŠã€<code>SELECT</code> æ–‡ã¯ã€<code>SELECT</code> å¥ ğŸ‘‰ <code>FROM</code> å¥ ğŸ‘‰
      <code>WHERE</code> å¥ ğŸ‘‰ <code>GROUP BY</code> å¥ ğŸ‘‰ <code>HAVING</code> å¥ ğŸ‘‰
      <code>ORDER BY</code> å¥ ğŸ‘‰ (<code>LIMIT</code> å¥ / <code>OFFSET</code> å¥)
      ã¨ã„ã†é †ã§è¨˜è¿°ã—ãªã„ã¨<strong>æ§‹æ–‡ã‚¨ãƒ©ãƒ¼</strong>ã«ãªã‚‹ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>
      <h3 data-number="9.0.1" id="sqlãƒ‰ãƒªãƒ«-13"><span class="header-section-number">9.0.1</span>
      SQLãƒ‰ãƒªãƒ«ğŸ’»</h3>
      <p><code>ex-05_1.sql</code> ğŸ‘‰ <strong>s_characters</strong>
      ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¤ã„ã¦ã€æ¬¡ã®ã‚ˆã†ã«ã‚¸ãƒ§ãƒ–ã”ã¨ã®ã€Œå¹³å‡ãƒ¬ãƒ™ãƒ«ã€ã¨ã€Œäººæ•°ã€ã‚’é›†è¨ˆã—ãŸçµæœã‚»ãƒƒãƒˆã‚’å¾—ã‚‹ SQL
      ã‚’è¨˜è¿°ã›ã‚ˆã€‚</p>
      <ul>
      <li>äººæ•°ãŒ2åä»¥ä¸‹ã®ã‚¸ãƒ§ãƒ–ã¯çµæœã‚»ãƒƒãƒˆã«å«ã‚ãªã„ã“ã¨</li>
      <li>å¹³å‡ãƒ¬ãƒ™ãƒ«ã®é™é †ã§è¡¨ç¤ºã™ã‚‹ã“ã¨</li>
      </ul>
      <pre><code>   job   | avg_lv | num 
---------+--------+-----
 Samurai |   70.3 |   3
 Wizard  |   58.3 |   4
 Priest  |   38.8 |   4
 Fighter |   37.3 |   4</code></pre>
      <h2 data-number="9.1" id="whereå¥ã¨havingå¥ã®ä½¿ã„åˆ†ã‘ã«ã¤ã„ã¦"><span class="header-section-number">9.1</span> WHEREå¥ã¨HAVINGå¥ã®ä½¿ã„åˆ†ã‘ã«ã¤ã„ã¦</h2>
      <p><code>HAVING</code> å¥ã¯ã€<code>GROUP BY</code> ã«ã‚ˆã‚‹ <span class="masked">é›†ç´„çµæœã«å¯¾ã—ã¦æ¡ä»¶ã‚’ä½¿ã£ãŸçµã‚Šè¾¼ã¿ã‚’ã™ã‚‹ãŸã‚</span> ã«ä½¿ç”¨ã—ã¾ã™ã€‚</p>
      <p>ã¾ãŸã€<code>HAVING</code> å¥ã§ã¯ã€é›†ç´„ã‚­ãƒ¼ä»¥å¤–ã®ã‚«ãƒ©ãƒ ã¯ <code>COUNT</code> ã‚„
      <code>MAX</code>
      ãªã©ã®<strong>é›†ç´„é–¢æ•°ã‚’é©ç”¨ã—ãŸã†ãˆã§å‚ç…§ã™ã‚‹å¿…è¦</strong>ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€<code>GROUP BY guild</code>
      ã®ã¨ãã€<code>HAVING level &gt;= 30</code>
      ã¯æŒ‡å®šã§ãã¾ã›ã‚“ãŒã€<code>HAVING MIN(level) &gt;= 30</code> ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚</p>
      <ul>
      <li>é€†ã«è¨€ãˆã° <code>WHERE</code> å¥ã«ãŠã„ã¦ã€<code>COUNT</code> ã‚„ <code>MAX</code>
      ã®ã‚ˆã†ãª<strong>ã€Œé›†ç´„é–¢æ•°ã€ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“</strong>ã€‚</li>
      </ul>
      <h3 data-number="9.1.1" id="å®šç€ç¢ºèª-1"><span class="header-section-number">9.1.1</span>
      å®šç€ç¢ºèª</h3>
      <ul>
      <li>SQL ã«ãŠã„ã¦ã€æ¬¡ã«ç¤ºã™å„å¥ã‚’è¨˜è¿°ã™ã‚‹é©åˆ‡ãªé †åºã‚’è¨˜å·ã§ç­”ãˆã‚ˆã€‚
      <ul>
      <li>âŠ WHEREã€â· HAVINGã€â¸ GROUP BYã€â¹ ORDER BYã€âº SELECTã€â» FROM</li>
      <li><strong>ç­”ãˆ</strong> : <span class="masked">âºâ»âŠâ¸â·â¹</span></li>
      </ul></li>
      </ul>
      <h1 data-number="10" id="æˆæ¥­æ™‚é–“å¤–å­¦ç¿’ã®æŒ‡ç¤º-å®¿é¡Œ"><span class="header-section-number">10</span> æˆæ¥­æ™‚é–“å¤–å­¦ç¿’ã®æŒ‡ç¤º (å®¿é¡Œ)</h1>
      <p>ğŸš¨<strong>æœ¬ç§‘ç›®ã¯ã€Œå­¦ä¿®å˜ä½ç§‘ç›®ã€ã§ã‚ã‚Šã€1å›ã®è¬›ç¾©ã‚ãŸã‚Šã€Œ4æ™‚é–“ç›¸å½“ã€ã®æˆæ¥­æ™‚é–“å¤–å­¦ç¿’ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ç§‘ç›®ã§ã™</strong>ğŸƒ</p>
      <ul>
      <li>æ¬¡å›ã®è¬›ç¾©ã§ã€Œ<strong>å°ãƒ†ã‚¹ãƒˆâº</strong>ã€ã‚’å®Ÿæ–½ã—ã¾ã™ã€‚
      <ul>
      <li><strong>å®šç€ç¢ºèª</strong> ãŠã‚ˆã³ <strong>SQLãƒ‰ãƒªãƒ«</strong> ã‹ã‚‰ä¸»ã«å‡ºé¡Œã—ã¾ã™ã€‚</li>
      <li>è¬›ç¾©ãŒé€²è¡Œã™ã‚‹ã«ã¤ã‚Œã¦ã€å½“ç„¶ãªãŒã‚‰å°ãƒ†ã‚¹ãƒˆã®å†…å®¹ã‚‚è¤‡é›‘ã§é«˜åº¦ãªã‚‚ã®ã«ãªã£ã¦ã„ãã¾ã™ã€‚</li>
      </ul></li>
      <li>ã“ã“ã¾ã§ã®ç¬¬03å›è¬›ç¾©ï½ç¬¬05å›è¬›ç¾©ã§ã¯ã€å®Ÿè·µçš„ãª SQL
      ã«ã¤ã„ã¦å­¦ã‚“ã§ãã¾ã—ãŸã€‚æ¬¡å›è¬›ç¾©ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®<strong>æ¦‚å¿µè¨­è¨ˆ</strong>
      (æ¦‚å¿µãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®è¨­è¨ˆ) ãŠã‚ˆã³<strong>è«–ç†è¨­è¨ˆ</strong> (ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®è¨­è¨ˆ)
      ãªã©ã®ç†è«–ã«å¯„ã›ãŸå†…å®¹ã‚’å­¦ã‚“ã§ãã¾ã™ã€‚</li>
      <li>äºˆç¿’ã¨ã—ã¦ğŸ“– æ•™ç§‘æ›¸ã€Œé”äººã«å­¦ã¶DBè¨­è¨ˆ å¾¹åº•æŒ‡å—æ›¸
      (ç¬¬2ç‰ˆ)ã€ã®ä»¥ä¸‹ãƒšãƒ¼ã‚¸ã‚’èª­ã‚“ã§ãã¦ãã ã•ã„ã€‚å†…å®¹ãŒç†è§£ã§ããªãã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚ã“ã®äºˆç¿’ã®ç›®çš„ã¯
      <span class="masked">ã€Œã“ã“ãŒã‚ˆãåˆ†ã‹ã‚‰ãªã‹ã£ãŸã€ã¨ã„ã†ãƒã‚¤ãƒ³ãƒˆã‚’è‡ªè¦šçš„ã«æ•´ç†ã—ã¦ã€æ¬¡å›ã®æˆæ¥­ã«æœ›ã‚“ã§ã‚‚ã‚‰ã†ã“ã¨</span>
      ã«ã‚ã‚Šã¾ã™ã€‚
      <ul>
      <li>çš†ã•ã‚“ã¯æ—¢ã« PG3 ã§ã€è¤‡æ•°ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹ DB
      ã‚’æ‰±ã£ã¦ã„ã‚‹ã®ã§ã€ä»¥ä¸‹ã®é †ã§èª­ã‚€ã»ã†ãŒç´å¾—æ„ŸãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚</li>
      <li>pp.145-164 ç¬¬4ç« ã€ŒERå›³ã€
      <ul>
      <li>4-1 ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå¤šã™ãã‚‹</li>
      <li>4-2 ãƒ†ãƒ¼ãƒ–ãƒ«åŒå£«ã®é–¢é€£ã‚’è¦‹æŠœã</li>
      <li>4-3 ERå›³ã®æ›¸ãæ–¹</li>
      <li>4-4 ã€Œå¤šå¯¾å¤šã€ã¨é–¢é€£å®Ÿä½“</li>
      </ul></li>
      <li>pp.89-123 ç¬¬3ç« ã€Œè«–ç†è¨­è¨ˆã¨æ­£è¦åŒ–ã€
      <ul>
      <li>3-1 ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã¯ä½•ã‹</li>
      <li>3-2 ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ§‹æˆè¦ç´ </li>
      <li>3-3 æ­£è¦åŒ–ã¨ã¯ä½•ã‹</li>
      <li>3-4 ç¬¬1æ­£è¦å½¢</li>
      <li>3-5 ç¬¬2æ­£è¦å½¢ï½éƒ¨åˆ†é–¢æ•°å¾“å±</li>
      <li>3-6 ç¬¬3æ­£è¦å½¢ï½æ¨ç§»çš„é–¢æ•°å¾“å±</li>
      </ul></li>
      <li>pp.25-49 ç¬¬2ç« ã€Œè«–ç†è¨­è¨ˆã¨ç‰©ç†è¨­è¨ˆã€
      <ul>
      <li>2-1 æ¦‚å¿µã‚¹ã‚­ãƒ¼ãƒã¨è«–ç†è¨­è¨ˆ</li>
      <li>2-2 å†…éƒ¨ã‚¹ã‚­ãƒ¼ãƒã¨ç‰©ç†è¨­è¨ˆ</li>
      </ul></li>
      </ul></li>
      </ul>
      <hr>
      <ul>
      <li>ã“ã®è¬›ç¾©è³‡æ–™ã‚’å†èª­ãƒ»ç†Ÿèª­ã—ã€Œä¸æ˜ãªç”¨èªã€ã‚„ã€Œç†è§£ãŒä¸ååˆ†ãªç”¨èªã€ãŒã‚ã‚Œã°ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚„ã€ChatGPTãªã©ã®ç”ŸæˆAIã‚’åˆ©ç”¨ã—ã¦è§£æ±ºã—ã¦ãã ã•ã„ã€‚ã¾ãŸã€èˆˆå‘³é–¢å¿ƒã‚’æŒã£ãŸãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦ã€ã‚¦ã‚§ãƒ–ã€ç”ŸæˆAIã€YouTubeå‹•ç”»ãªã©ã‚’åˆ©ç”¨ã—ã¦çŸ¥è­˜ã‚’åºƒã’ã€ç†è§£ã‚’æ·±ã‚ã¦ãã ã•ã„ã€‚
      <ul>
      <li>ç‰¹ã« <strong>(ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹)</strong>
      ã‚’ç¤ºã—ã¦ã„ã‚‹ã‚‚ã®ã«ã¤ã„ã¦ã¯ã€å®Ÿéš›ã«ç”ŸæˆAIã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æŠ•ã’ã€ã•ã‚‰ã«å¯¾è©±ã‚’é‡ã­ã‚‹ã“ã¨ã§ã€çŸ¥è­˜ã®å¹…ã‚’åºƒã’ã‚‹ã ã‘ã§ãªãã€ç†è§£ã‚’ã‚ˆã‚Šæ·±ãç¢ºã‹ãªã‚‚ã®ã«ã—ã¦ãã ã•ã„ã€‚</li>
      </ul></li>
      <li>è¬›ç¾©è³‡æ–™å†…ã®ã€Œ<strong>æ¼”ç¿’</strong>ã€ã‚„ã€Œ<strong>SQLãƒ‰ãƒªãƒ«</strong>ã€ã«å†åº¦å–ã‚Šçµ„ã‚“ã§ãã ã•ã„ã€‚ç‰¹ã«ã€<strong>SQLãƒ‰ãƒªãƒ«</strong>ğŸ’»
      ã¯ã€æˆæ¥­æ™‚é–“ä¸­ã«1å›å–ã‚Šçµ„ã‚€ã ã‘ã§ã¯å®šç€ã—ãªã„ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</li>
      </ul>
      <!-- ---------------------------------------- -->
    </main>

    <footer class="markdown-body">
      <p><a href="https://takeshiwada1980.github.io/DB-2025/">è¬›ç¾©è³‡æ–™ã®Indexã«ç§»å‹•</a></p>
    </footer>

    <script>
      window.onload = function () {
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£
        let openBtn = document.getElementsByClassName("openbtn")[0];
        let navPnl = document.getElementById("g-nav");
        openBtn.onclick = () => {
          openBtn.classList.toggle("active");
          navPnl.classList.toggle("panelactive");
        };

        let items = navPnl.getElementsByTagName("a");
        Array.from(items).forEach((item) => {
          item.onclick = () => {
            openBtn.classList.toggle("active");
            navPnl.classList.toggle("panelactive");
          };
        });

        // ãƒã‚¹ã‚¯å‡¦ç†
        let maskedSpans = document.getElementsByClassName("masked");
        Array.from(maskedSpans).forEach((span) => {
          span.onclick = () => {
            span.classList.toggle("open");
          };
        });

        // data-startfrom å±æ€§ã®è¡Œç•ªå·ã‚«ã‚¦ãƒ³ã‚¿ã®ãƒªã‚»ãƒƒãƒˆ
        document.querySelectorAll("div.sourceCode").forEach(function (div) {
          var startFrom = div.getAttribute("data-startfrom");
          if (startFrom != null) {
            div.style.counterReset = "pg-line " + (startFrom - 1);
          }
        });

        // ç”»åƒã«ãƒªãƒ³ã‚¯ã‚’ä»˜ä¸
        // let images = document.querySelectorAll("figure img");
        // Array.from(images).forEach((img) => {
        //   img.onclick = () => {
        //     location.href = img.getAttribute("src");
        //   };
        // });
      };
    </script>
  

</body></html>